/*!
 * TransitMedia ResourceCalendar v1.1.0
 * (c) 2015 hans de waart, 2015
 */
(function(aA,w){var R={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*",handleWindowResize:true};var W={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}};var aI=aA.fullCalendar={version:"1.6.4-1"};var ak=aI.views={};aA.fn.fullCalendar=function(aW){if(typeof aW=="string"){var aV=Array.prototype.slice.call(arguments,1);var aX;this.each(function(){var aZ=aA.data(this,"fullCalendar");if(aZ&&aA.isFunction(aZ[aW])){var aY=aZ[aW].apply(aZ,aV);if(aX===w){aX=aY}if(aW=="destroy"){aA.removeData(this,"fullCalendar")}}});if(aX!==w){return aX}return this}aW=aW||{};var aU=aW.eventSources||[];delete aW.eventSources;if(aW.events){aU.push(aW.events);delete aW.events}aW=aA.extend(true,{},R,(aW.isRTL||aW.isRTL===w&&R.isRTL)?W:{},aW);this.each(function(a0,aY){var aZ=aA(aY);var a1=new u(aZ,aW,aU);aZ.data("fullCalendar",a1);a1.render()});return this};function ap(aU){aA.extend(true,R,aU)}function u(bf,bp,bs,bg){var bL=this;bL.options=bp;bL.render=bA;bL.destroy=bN;bL.refetchEvents=a8;bL.reportEvents=bc;bL.refetchResources=bn;bL.reportEventChange=bQ;bL.rerenderEvents=aY;bL.changeView=a6;bL.select=bM;bL.unselect=a7;bL.prev=bw;bL.next=aX;bL.largePrev=bO;bL.largeNext=bk;bL.prevYear=bP;bL.nextYear=aV;bL.today=bh;bL.gotoDate=bz;bL.incrementDate=bl;bL.formatDate=function(bW,bV){return G(bW,bV,bp)};bL.formatDates=function(bX,bW,bV){return l(bX,bW,bV,bp)};bL.getDate=bm;bL.getView=bt;bL.option=bI;bL.trigger=by;t.call(bL,bp,bs);d.call(bL,bp);var aU=bL.isFetchNeeded;var bT=bL.fetchEvents;var aW=bL.fetchResources;var bJ=bf[0];var a0;var bB;var ba;var bU;var a9;var bx;var a3;var bC=0;var bK=0;var bR=new Date();var br=[];var a1;D(bR,bp.year,bp.month,bp.date);function bA(bV){if(!ba){bq()}else{if(bG()){bD();bS(bV)}}}function bq(){bU=bp.theme?"ui":"fc";bf.addClass("fc");if(bp.isRTL){bf.addClass("fc-rtl")}else{bf.addClass("fc-ltr")}if(bp.theme){bf.addClass("ui-widget")}ba=aA("<div class='fc-content' style='position:relative'/>").prependTo(bf);a0=new X(bL,bp);bB=a0.render();if(bB){bf.prepend(bB)}a6(bp.defaultView);if(bp.handleWindowResize){aA(window).resize(bb)}if(!be()){a5()}}function a5(){setTimeout(function(){if(!a9.start&&be()){bo()}},0)}function bN(){if(a9){by("viewDestroy",a9,a9,a9.element);a9.triggerEventDestroy()}aA(window).unbind("resize",bb);a0.destroy();ba.remove();bf.removeClass("fc fc-rtl ui-widget")}function bG(){return bf.is(":visible")}function be(){return aA("body").is(":visible")}function a6(bV){if(!a9||bV!=a9.name){bE(bV)}}function bE(bV){bK++;if(a9){by("viewDestroy",a9,a9,a9.element);a7();a9.triggerEventDestroy();aZ();a9.element.remove();a0.deactivateButton(a9.name)}a0.activateButton(bV);a9=new ak[bV](aA("<div class='fc-view fc-view-"+bV+"' style='position:relative'/>").appendTo(ba),bL);bo();bd();bK--}function bo(bV){if(!a9.start||bV||bR<a9.start||bR>=a9.end){if(bG()){bS(bV)}}}function bS(bV){bK++;if(a9.start){by("viewDestroy",a9,a9,a9.element);a7();bu()}aZ();a9.render(bR,bV||0);bH();bd();(a9.afterRender||ay)();bi();bv();by("viewRender",a9,a9,a9.element);a9.trigger("viewDisplay",bJ);bK--;a4()}function bj(){if(bG()){a7();bu();bD();bH();a2()}}function bD(){if(bp.contentHeight){a3=bp.contentHeight}else{if(bp.height){a3=bp.height-(bB?bB.height():0)-K(ba)}else{a3=Math.round(ba.width()/Math.max(bp.aspectRatio,0.5))}}}function bH(){if(a3===w){bD()}bK++;a9.setHeight(a3);a9.setWidth(ba.width());bK--;bx=bf.outerWidth()}function bb(){if(!bK){if(a9.start){var bV=++bC;setTimeout(function(){if(bV==bC&&!bK&&bG()){if(bx!=(bx=bf.outerWidth())){bK++;bj();a9.trigger("windowResize",bJ);bK--}}},200)}else{a5()}}}function a8(){bu();bF()}function aY(bV){bu();a2(bV)}function a2(bV){if(bG()){a9.setEventData(br);a9.renderEvents(br,bV);a9.trigger("eventAfterAllRender")}}function bu(){a9.triggerEventDestroy();a9.clearEvents();a9.clearEventData()}function a4(){if(!bp.lazyFetching||aU(a9.visStart,a9.visEnd)){if(bp.refetchResources){bn()}bF()}else{a2()}}function bF(){bT(a9.visStart,a9.visEnd)}function bn(){aW(false,a9)}function bc(bV){br=bV;a2()}function bQ(bV){aY(bV)}function bi(){a0.updateTitle(a9.title)}function bv(){var bV=new Date();if(bV>=a9.start&&bV<a9.end){a0.disableButton("today")}else{a0.enableButton("today")}}function bM(bX,bV,bW){a9.select(bX,bV,bW===w?true:bW)}function a7(){if(a9){a9.unselect()}}function bw(){bo(-1)}function aX(){bo(1)}function bO(){bo(-100)}function bk(){bo(100)}function bP(){ao(bR,-1);bo()}function aV(){ao(bR,1);bo()}function bh(){bR=new Date();bo()}function bz(bW,bX,bV){if(bW instanceof Date){bR=S(bW)}else{D(bR,bW,bX,bV)}bo()}function bl(bW,bV,bX){if(bW!==w){ao(bR,bW)}if(bV!==w){q(bR,bV)}if(bX!==w){aK(bR,bX)}bo()}function bm(){return S(bR)}function aZ(){ba.css({width:"100%",height:ba.height(),overflow:"hidden"})}function bd(){ba.css({width:"",height:"",overflow:""})}function bt(){return a9}function bI(bV,bW){if(bW===w){return bp[bV]}if(bV=="height"||bV=="contentHeight"||bV=="aspectRatio"){bp[bV]=bW;bj()}}function by(bV,bW){if(bp[bV]){return bp[bV].apply(bW||bJ,Array.prototype.slice.call(arguments,2))}}if(bp.droppable){aA(document).bind("dragstart",function(bX,bY){var bV=bX.target;var bZ=aA(bV);if(!bZ.parents(".fc").length){var bW=bp.dropAccept;if(aA.isFunction(bW)?bW.call(bV,bZ):bZ.is(bW)){a1=bV;a9.dragStart(a1,bX,bY)}}}).bind("dragstop",function(bV,bW){if(a1){a9.dragStop(a1,bV,bW);a1=null}})}}function X(aX,a6){var a5=this;a5.render=aV;a5.destroy=a1;a5.updateTitle=aZ;a5.activateButton=aU;a5.deactivateButton=a3;a5.disableButton=aW;a5.enableButton=a0;var aY=aA([]);var a2;function aV(){a2=a6.theme?"ui":"fc";var a7=a6.header;if(a7){aY=aA("<table class='fc-header' style='width:100%'/>").append(aA("<tr/>").append(a4("left")).append(a4("center")).append(a4("right")));return aY}}function a1(){aY.remove()}function a4(a7){var a9=aA("<td class='fc-header-"+a7+"'/>");var a8=a6.header[a7];if(a8){aA.each(a8.split(" "),function(bb){if(bb>0){a9.append("<span class='fc-header-space'/>")}var ba;aA.each(this.split(","),function(be,bd){if(bd=="title"){a9.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");if(ba){ba.addClass(a2+"-corner-right")}ba=null}else{var bc;if(aX[bd]){bc=aX[bd]}else{if(ak[bd]){bc=function(){bf.removeClass(a2+"-state-hover");aX.changeView(bd)}}}if(bc){var bg=a6.theme?J(a6.buttonIcons,bd):null;var bh=J(a6.buttonText,bd);var bf=aA("<span class='fc-button fc-button-"+bd+" "+a2+"-state-default'>"+(bg?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+bg+"'/></span>":bh)+"</span>").click(function(){if(!bf.hasClass(a2+"-state-disabled")){bc()}}).mousedown(function(){bf.not("."+a2+"-state-active").not("."+a2+"-state-disabled").addClass(a2+"-state-down")}).mouseup(function(){bf.removeClass(a2+"-state-down")}).hover(function(){bf.not("."+a2+"-state-active").not("."+a2+"-state-disabled").addClass(a2+"-state-hover")},function(){bf.removeClass(a2+"-state-hover").removeClass(a2+"-state-down")}).appendTo(a9);aT(bf);if(!ba){bf.addClass(a2+"-corner-left")}ba=bf}}});if(ba){ba.addClass(a2+"-corner-right")}})}return a9}function aZ(a7){aY.find("h2").html(a7)}function aU(a7){aY.find("span.fc-button-"+a7).addClass(a2+"-state-active")}function a3(a7){aY.find("span.fc-button-"+a7).removeClass(a2+"-state-active")}function aW(a7){aY.find("span.fc-button-"+a7).addClass(a2+"-state-disabled")}function a0(a7){aY.find("span.fc-button-"+a7).removeClass(a2+"-state-disabled")}}aI.sourceNormalizers=[];aI.sourceFetchers=[];var o={dataType:"json",cache:false};var aa=1;function t(a0,a8){var ba=this;ba.isFetchNeeded=a2;ba.fetchEvents=a9;ba.addEventSource=aX;ba.removeEventSource=aY;ba.updateEvent=bd;ba.renderEvent=a6;ba.removeEvents=bp;ba.clientEvents=bj;ba.normalizeEvent=a5;var bc=ba.trigger;var aU=ba.getView;var bf=ba.reportEvents;var bh={events:[]};var aV=[bh];var bm,bi;var aW=0;var bn=0;var bl=0;var bb=[];for(var bk=0;bk<a8.length;bk++){be(a8[bk])}function a2(br,bq){return !bm||br<bm||bq>bi}function a9(bu,br){bm=S(bu);bi=S(br);bb=[];var bt=++aW;var bq=aV.length;bn=bq;for(var bs=0;bs<bq;bs++){a1(aV[bs],bt)}}function a1(br,bq){bg(br,function(bt){if(bq==aW){if(bt){if(a0.eventDataTransform){bt=aA.map(bt,a0.eventDataTransform)}if(br.eventDataTransform){bt=aA.map(bt,br.eventDataTransform)}for(var bs=0;bs<bt.length;bs++){bt[bs].source=br;a5(bt[bs])}bb=bb.concat(bt)}bn--;if(!bn){bf(bb)}}})}function bg(bq,bA){var bv;var bz=aI.sourceFetchers;var bx;for(bv=0;bv<bz.length;bv++){bx=bz[bv](bq,bm,bi,bA);if(bx===true){return}else{if(typeof bx=="object"){bg(bx,bA);return}}}var bC=bq.events;if(bC){if(aA.isFunction(bC)){a4();bC(S(bm),S(bi),function(bE){bA(bE);bo()})}else{if(aA.isArray(bC)){bA(bC)}else{bA()}}}else{var br=bq.url;if(br){var bB=bq.success;var by=bq.error;var bs=bq.complete;var bD;if(aA.isFunction(bq.data)){bD=bq.data()}else{bD=bq.data}var bu=aA.extend({},bD||{});var bw=aQ(bq.startParam,a0.startParam);var bt=aQ(bq.endParam,a0.endParam);if(bw){bu[bw]=Math.round(+bm/1000)}if(bt){bu[bt]=Math.round(+bi/1000)}a4();aA.ajax(aA.extend({},o,bq,{data:bu,success:function(bF){bF=bF||[];var bE=M(bB,this,arguments);if(aA.isArray(bE)){bF=bE}bA(bF)},error:function(){M(by,this,arguments);bA()},complete:function(){M(bs,this,arguments);bo()}}))}else{bA()}}}function aX(bq){bq=be(bq);if(bq){bn++;a1(bq,aW)}}function be(bq){if(aA.isFunction(bq)||aA.isArray(bq)){bq={events:bq}}else{if(typeof bq=="string"){bq={url:bq}}}if(typeof bq=="object"){a7(bq);aV.push(bq);return bq}}function aY(bq){aV=aA.grep(aV,function(br){return !a3(br,bq)});bb=aA.grep(bb,function(br){return !a3(br.source,bq)});bf(bb)}function bd(bv){var bt,br=bb.length,bw,bq=aU().defaultEventEnd,bu=bv.start-bv._start,bs=bv.end?(bv.end-(bv._end||bq(bv))):0;for(bt=0;bt<br;bt++){bw=bb[bt];if(bw._id==bv._id&&bw!=bv){bw.start=new Date(+bw.start+bu);if(bv.end){if(bw.end){bw.end=new Date(+bw.end+bs)}else{bw.end=new Date(+bq(bw)+bs)}}else{bw.end=null}bw.title=bv.title;bw.url=bv.url;bw.allDay=bv.allDay;bw.className=bv.className;bw.editable=bv.editable;bw.color=bv.color;bw.backgroundColor=bv.backgroundColor;bw.borderColor=bv.borderColor;bw.textColor=bv.textColor;a5(bw)}}a5(bv);bf(bb)}function a6(br,bq){a5(br);if(!br.source){if(bq){bh.events.push(br);br.source=bh}bb.push(br)}bf(bb)}function bp(br){if(!br){bb=[];for(var bq=0;bq<aV.length;bq++){if(aA.isArray(aV[bq].events)){aV[bq].events=[]}}}else{if(!aA.isFunction(br)){var bs=br+"";br=function(bt){return bt._id==bs}}bb=aA.grep(bb,br,true);for(var bq=0;bq<aV.length;bq++){if(aA.isArray(aV[bq].events)){aV[bq].events=aA.grep(aV[bq].events,br,true)}}}bf(bb)}function bj(bq){if(aA.isFunction(bq)){return aA.grep(bb,bq)}else{if(bq){bq+="";return aA.grep(bb,function(br){return br._id==bq})}}return bb}function a4(){if(!bl++){bc("loading",null,true,aU())}}function bo(){if(!--bl){bc("loading",null,false,aU())}}function a5(br){var bs=br.source||{};var bq=aQ(bs.ignoreTimezone,a0.ignoreTimezone);br._id=br._id||(br.id===w?"_fc"+aa++:br.id+"");if(br.date){if(!br.start){br.start=br.date}delete br.date}br._start=S(br.start=af(br.start,bq));br.end=af(br.end,bq);if(br.end&&br.end<=br.start){br.end=null}br._end=br.end?S(br.end):null;if(br.allDay===w){br.allDay=aQ(bs.allDayDefault,a0.allDayDefault)}if(br.className){if(typeof br.className=="string"){br.className=br.className.split(/\s+/)}}else{br.className=[]}}function a7(bs){if(bs.className){if(typeof bs.className=="string"){bs.className=bs.className.split(/\s+/)}}else{bs.className=[]}var br=aI.sourceNormalizers;for(var bq=0;bq<br.length;bq++){br[bq](bs)}}function a3(br,bq){return br&&bq&&aZ(br)==aZ(bq)}function aZ(bq){return((typeof bq=="object")?(bq.events||bq.url):"")||bq}}function d(aY){var aZ=this;aZ.fetchResources=aV;var aX=[];var aW;aU(aY.resources);function aU(a2){var a5={};if(aA.isFunction(a2)){a5={resources:a2};aX.push(a5)}else{if(typeof a2=="string"){a5={url:a2};aX.push(a5)}else{if(typeof a2=="object"){for(var a3=0;a3<a2.length;a3++){var a4=a2[a3];a1(a4);a5={resources:a4};aX.push(a5)}}}}}function aV(a3,a6){a3=typeof a3!=="undefined"?a3:true;if(aW!=w&&a3){return aW}else{aW=[];var a2=aX.length;for(var a4=0;a4<a2;a4++){var a5=a0(aX[a4],a6);aW=aW.concat(a5)}return aW}}function a0(a6,a8){var a7=a6.resources;if(a7){if(aA.isFunction(a7)){return a7()}}else{var a3=a6.url;if(a3){var a5={};if(typeof a8=="object"){var a4=aY.startParam;var a2=aY.endParam;if(a4){a5[a4]=Math.round(+a8.visStart/1000)}if(a2){a5[a2]=Math.round(+a8.visEnd/1000)}}aA.ajax(aA.extend({},a6,{data:a5,dataType:"json",cache:false,success:function(a9){a9=a9||[];a7=a9},error:function(){alert("ajax error getting json from "+a3)},async:false}))}}return a7}function a1(a4){if(a4.className){if(typeof a4.className=="string"){a4.className=a4.className.split(/\s+/)}}else{a4.className=[]}var a3=aI.sourceNormalizers;for(var a2=0;a2<a3.length;a2++){a3[a2](a4)}}}aI.addDays=aK;aI.cloneDate=S;aI.parseDate=af;aI.parseISO8601=p;aI.parseTime=aO;aI.formatDate=G;aI.formatDates=l;var U=["sun","mon","tue","wed","thu","fri","sat"],aD=86400000,ar=3600000,Y=60000;function ao(aV,aW,aU){aV.setFullYear(aV.getFullYear()+aW);if(!aU){f(aV)}return aV}function q(aX,aY,aW){if(+aX){var aU=aX.getMonth()+aY,aV=S(aX);aV.setDate(1);aV.setMonth(aU);aX.setMonth(aU);if(!aW){f(aX)}while(aX.getMonth()!=aV.getMonth()){aX.setDate(aX.getDate()+(aX<aV?1:-1))}}return aX}function aK(aX,aY,aW){if(+aX){var aU=aX.getDate()+aY,aV=S(aX);aV.setHours(9);aV.setDate(aU);aX.setDate(aU);if(!aW){f(aX)}aM(aX,aV)}return aX}function aM(aV,aU){if(+aV){while(aV.getDate()!=aU.getDate()){aV.setTime(+aV+(aV<aU?1:-1)*ar)}}}function k(aU,aV){aU.setMinutes(aU.getMinutes()+aV);return aU}function f(aU){aU.setHours(0);aU.setMinutes(0);aU.setSeconds(0);aU.setMilliseconds(0);return aU}function S(aU,aV){if(aV){return f(new Date(+aU))}return new Date(+aU)}function h(){var aU=0,aV;do{aV=new Date(1970,aU++,1)}while(aV.getHours());return aV}function aP(aU,aV,aW){aV=aV||1;while(!aU.getDay()||(aW&&aU.getDay()==1||!aW&&aU.getDay()==6)){aK(aU,aV)}return aU}function aH(aV,aU){return Math.round((S(aV,true)-S(aU,true))/aD)}function D(aV,aX,aU,aW){if(aX!==w&&aX!=aV.getFullYear()){aV.setDate(1);aV.setMonth(0);aV.setFullYear(aX)}if(aU!==w&&aU!=aV.getMonth()){aV.setDate(1);aV.setMonth(aU)}if(aW!==w){aV.setDate(aW)}}function af(aV,aU){if(typeof aV=="object"){return aV}if(typeof aV=="number"){return new Date(aV*1000)}if(typeof aV=="string"){if(aV.match(/^\d+(\.\d+)?$/)){return new Date(parseFloat(aV)*1000)}if(aU===w){aU=true}return p(aV,aU)||(aV?new Date(aV):null)}return null}function p(aY,aV){var aU=aY.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!aU){return null}var aX=new Date(aU[1],0,1);if(aV||!aU[13]){var aW=new Date(aU[1],0,1,9,0);if(aU[3]){aX.setMonth(aU[3]-1);aW.setMonth(aU[3]-1)}if(aU[5]){aX.setDate(aU[5]);aW.setDate(aU[5])}aM(aX,aW);if(aU[7]){aX.setHours(aU[7])}if(aU[8]){aX.setMinutes(aU[8])}if(aU[10]){aX.setSeconds(aU[10])}if(aU[12]){aX.setMilliseconds(Number("0."+aU[12])*1000)}aM(aX,aW)}else{aX.setUTCFullYear(aU[1],aU[3]?aU[3]-1:0,aU[5]||1);aX.setUTCHours(aU[7]||0,aU[8]||0,aU[10]||0,aU[12]?Number("0."+aU[12])*1000:0);if(aU[14]){var aZ=Number(aU[16])*60+(aU[18]?Number(aU[18]):0);aZ*=aU[15]=="-"?1:-1;aX=new Date(+aX+(aZ*60*1000))}}return aX}function aO(aW){if(typeof aW=="number"){return aW*60}if(typeof aW=="object"){return aW.getHours()*60+aW.getMinutes()}var aU=aW.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(aU){var aV=parseInt(aU[1],10);if(aU[3]){aV%=12;if(aU[3].toLowerCase().charAt(0)=="p"){aV+=12}}return aV*60+(aU[2]?parseInt(aU[2],10):0)}}function G(aV,aW,aU){return l(aV,null,aW,aU)}function l(a6,a5,a4,a7){a7=a7||R;var aV=a6,aX=a5,aY,aZ=a4.length,a1,aW,a3,a0="";for(aY=0;aY<aZ;aY++){a1=a4.charAt(aY);if(a1=="'"){for(aW=aY+1;aW<aZ;aW++){if(a4.charAt(aW)=="'"){if(aV){if(aW==aY+1){a0+="'"}else{a0+=a4.substring(aY+1,aW)}aY=aW}break}}}else{if(a1=="("){for(aW=aY+1;aW<aZ;aW++){if(a4.charAt(aW)==")"){var aU=G(aV,a4.substring(aY+1,aW),a7);if(parseInt(aU.replace(/\D/,""),10)){a0+=aU}aY=aW;break}}}else{if(a1=="["){for(aW=aY+1;aW<aZ;aW++){if(a4.charAt(aW)=="]"){var a2=a4.substring(aY+1,aW);var aU=G(aV,a2,a7);if(aU!=G(aX,a2,a7)){a0+=aU}aY=aW;break}}}else{if(a1=="{"){aV=a5;aX=a6}else{if(a1=="}"){aV=a6;aX=a5}else{for(aW=aZ;aW>aY;aW--){if(a3=aG[a4.substring(aY,aW)]){if(aV){a0+=a3(aV,a7)}aY=aW-1;break}}if(aW==aY){if(aV){a0+=a1}}}}}}}}return a0}var aG={s:function(aU){return aU.getSeconds()},ss:function(aU){return ah(aU.getSeconds())},m:function(aU){return aU.getMinutes()},mm:function(aU){return ah(aU.getMinutes())},h:function(aU){return aU.getHours()%12||12},hh:function(aU){return ah(aU.getHours()%12||12)},H:function(aU){return aU.getHours()},HH:function(aU){return ah(aU.getHours())},d:function(aU){return aU.getDate()},dd:function(aU){return ah(aU.getDate())},ddd:function(aV,aU){return aU.dayNamesShort[aV.getDay()]},dddd:function(aV,aU){return aU.dayNames[aV.getDay()]},M:function(aU){return aU.getMonth()+1},MM:function(aU){return ah(aU.getMonth()+1)},MMM:function(aV,aU){return aU.monthNamesShort[aV.getMonth()]},MMMM:function(aV,aU){return aU.monthNames[aV.getMonth()]},yy:function(aU){return(aU.getFullYear()+"").substring(2)},yyyy:function(aU){return aU.getFullYear()},t:function(aU){return aU.getHours()<12?"a":"p"},tt:function(aU){return aU.getHours()<12?"am":"pm"},T:function(aU){return aU.getHours()<12?"A":"P"},TT:function(aU){return aU.getHours()<12?"AM":"PM"},u:function(aU){return G(aU,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(aV){var aU=aV.getDate();if(aU>10&&aU<20){return"th"}return["st","nd","rd"][aU%10-1]||"th"},w:function(aV,aU){return aU.weekNumberCalculation},W:function(aU){return x(aU)}};aI.dateFormatters=aG;function x(aU){var aV;var aW=new Date(aU.getTime());aW.setDate(aW.getDate()+4-(aW.getDay()||7));aV=aW.getTime();aW.setMonth(0);aW.setDate(1);return Math.floor(Math.round((aV-aW)/86400000)/7)+1}aI.applyAll=M;function av(aU){if(aU.end){return s(aU.end,aU.allDay)}else{return aK(S(aU.start),1)}}function s(aU,aV){aU=S(aU);return aV||aU.getHours()||aU.getMinutes()?aK(aU,1):f(aU)}function v(aV,aU,aW){aV.unbind("mouseover").mouseover(function(a0){var aZ=a0.target,a1,aY,aX;while(aZ!=this){a1=aZ;aZ=aZ.parentNode}if((aY=a1._fci)!==w){a1._fci=w;aX=aU[aY];aW(aX.event,aX.element,aX);aA(a0.target).trigger(a0)}a0.stopPropagation()})}function aB(aW,aX,aU){for(var aV=0,aY;aV<aW.length;aV++){aY=aA(aW[aV]);aY.width(Math.max(0,aX-j(aY,aU)))}}function ae(aX,aU,aV){for(var aW=0,aY;aW<aX.length;aW++){aY=aA(aX[aW]);aY.height(Math.max(0,aU-K(aY,aV)))}}function j(aV,aU){return am(aV)+r(aV)+(aU?al(aV):0)}function am(aU){return(parseFloat(aA.css(aU[0],"paddingLeft",true))||0)+(parseFloat(aA.css(aU[0],"paddingRight",true))||0)}function al(aU){return(parseFloat(aA.css(aU[0],"marginLeft",true))||0)+(parseFloat(aA.css(aU[0],"marginRight",true))||0)}function r(aU){return(parseFloat(aA.css(aU[0],"borderLeftWidth",true))||0)+(parseFloat(aA.css(aU[0],"borderRightWidth",true))||0)}function K(aV,aU){return B(aV)+ax(aV)+(aU?m(aV):0)}function B(aU){return(parseFloat(aA.css(aU[0],"paddingTop",true))||0)+(parseFloat(aA.css(aU[0],"paddingBottom",true))||0)}function m(aU){return(parseFloat(aA.css(aU[0],"marginTop",true))||0)+(parseFloat(aA.css(aU[0],"marginBottom",true))||0)}function ax(aU){return(parseFloat(aA.css(aU[0],"borderTopWidth",true))||0)+(parseFloat(aA.css(aU[0],"borderBottomWidth",true))||0)}function ay(){}function a(aV,aU){return aV-aU}function az(aU){return Math.max.apply(Math,aU)}function ah(aU){return(aU<10?"0":"")+aU}function J(aY,aU){if(aY[aU]!==w){return aY[aU]}var aX=aU.split(/(?=[A-Z])/),aW=aX.length-1,aV;for(;aW>=0;aW--){aV=aY[aX[aW].toLowerCase()];if(aV!==w){return aV}}return aY[""]}function aN(aU){return aU.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function aT(aU){aU.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function g(aU){aU.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function P(aU,aV){aU.each(function(aW,aX){aX.className=aX.className.replace(/^fc-\w*/,"fc-"+U[aV.getDay()])})}function V(aV,aW){var aU=aV.source||{};var a1=aV.color;var aZ=aU.color;var aY=aW("eventColor");var a2=aV.backgroundColor||a1||aU.backgroundColor||aZ||aW("eventBackgroundColor")||aY;var aX=aV.borderColor||a1||aU.borderColor||aZ||aW("eventBorderColor")||aY;var a3=aV.textColor||aU.textColor||aW("eventTextColor");var a0=[];if(a2){a0.push("background-color:"+a2)}if(aX){a0.push("border-color:"+aX)}if(a3){a0.push("color:"+a3)}return a0.join(";")}function M(aX,aY,aV){if(aA.isFunction(aX)){aX=[aX]}if(aX){var aW;var aU;for(aW=0;aW<aX.length;aW++){aU=aX[aW].apply(aY,aV)||aU}return aU}}function aQ(){for(var aU=0;aU<arguments.length;aU++){if(arguments[aU]!==w){return arguments[aU]}}}ak.month=ai;function ai(aZ,aY){var a2=this;a2.render=aU;E.call(a2,aZ,aY,"month");var aV=a2.opt;var aW=a2.renderBasic;var a0=a2.skipHiddenDays;var aX=a2.getCellsPerWeek;var a1=aY.formatDate;function aU(a5,ba){if(ba){q(a5,ba);a5.setDate(1)}var a3=aV("firstDay");var a4=S(a5,true);a4.setDate(1);var a6=q(S(a4),1);var bb=S(a4);aK(bb,-((bb.getDay()-a3+7)%7));a0(bb);var a7=S(a6);aK(a7,(7-a7.getDay()+a3)%7);a0(a7,-1,true);var a9=aX();var a8=Math.round(aH(a7,bb)/7);if(aV("weekMode")=="fixed"){aK(a7,(6-a8)*7);a8=6}a2.title=a1(a4,aV("titleFormat"));a2.start=a4;a2.end=a6;a2.visStart=bb;a2.visEnd=a7;aW(a8,a9,true)}}ak.basicWeek=aJ;function aJ(aZ,aY){var a2=this;a2.render=aU;E.call(a2,aZ,aY,"basicWeek");var aV=a2.opt;var aW=a2.renderBasic;var a1=a2.skipHiddenDays;var aX=a2.getCellsPerWeek;var a0=aY.formatDates;function aU(a7,a9){if(a9){aK(a7,a9*7)}var a8=aK(S(a7),-((a7.getDay()-aV("firstDay")+7)%7));var a5=aK(S(a8),7);var a4=S(a8);a1(a4);var a3=S(a5);a1(a3,-1,true);var a6=aX();a2.start=a8;a2.end=a5;a2.visStart=a4;a2.visEnd=a3;a2.title=a0(a4,aK(S(a3),-1),aV("titleFormat"));aW(1,a6,false)}}ak.basicDay=O;function O(aY,a1){var aX=this;aX.render=aZ;E.call(aX,aY,a1,"basicDay");var aW=aX.opt;var aU=aX.renderBasic;var aV=aX.skipHiddenDays;var a0=a1.formatDate;function aZ(a3,a5){if(a5){aK(a3,a5)}aV(a3,a5<0?-1:1);var a4=S(a3,true);var a2=aK(S(a4),1);aX.title=a0(a3,aW("titleFormat"));aX.start=aX.visStart=a4;aX.end=aX.visEnd=a2;aU(1,1,false)}}ap({weekMode:"fixed"});function E(bf,bG,a7){var bF=this;bF.renderBasic=bz;bF.setHeight=bD;bF.setWidth=bO;bF.renderDayOverlay=bv;bF.defaultSelectionEnd=bu;bF.renderSelection=bH;bF.clearSelection=aU;bF.reportDayClick=bd;bF.dragStart=aZ;bF.dragStop=a8;bF.defaultEventEnd=bT;bF.getHoverListener=function(){return a0};bF.colLeft=bV;bF.colRight=bi;bF.colContentLeft=bC;bF.colContentRight=bA;bF.getIsCellAllDay=function(){return true};bF.allDayRow=bc;bF.getRowCnt=function(){return bm};bF.getColCnt=function(){return a2};bF.getColWidth=function(){return br};bF.getDaySegmentContainer=function(){return bb};aL.call(bF,bf,bG,a7);c.call(bF);au.call(bF);at.call(bF);var bk=bF.opt;var bw=bF.trigger;var bR=bF.renderOverlay;var a6=bF.clearOverlays;var bB=bF.daySelectionMousedown;var aV=bF.cellToDate;var bK=bF.dateToCell;var by=bF.rangeToSegments;var bE=bG.formatDate;var bl;var be;var a9;var bp;var a5;var bg;var bs;var bq;var aX;var bb;var bS;var bU;var br;var ba;var bm,a2;var bh;var bI;var a0;var bL;var bM;var bW;var a3;var bj;var bJ;var bt;aT(bf.addClass("fc-grid"));function bz(bX,bY,bZ){bm=bX;a2=bY;bh=bZ;bP();if(!bp){aY()}bo()}function bP(){bW=bk("theme")?"ui":"fc";a3=bk("columnFormat");bj=bk("weekNumbers");bJ=bk("weekNumberTitle");if(bk("weekNumberCalculation")!="iso"){bt="w"}else{bt="W"}}function aY(){bb=aA("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(bf)}function bo(){var bX=bx();if(bl){bl.remove()}bl=aA(bX).appendTo(bf);be=bl.find("thead");a9=be.find(".fc-day-header");bp=bl.find("tbody");a5=bp.find("tr");bg=bp.find(".fc-day");bs=a5.find("td:first-child");bq=a5.eq(0).find(".fc-day > div");aX=a5.eq(0).find(".fc-day-content > div");g(be.add(be.find("tr")));g(a5);a5.eq(0).addClass("fc-first");a5.filter(":last").addClass("fc-last");bg.each(function(bZ,b0){var bY=aV(Math.floor(bZ/a2),bZ%a2);bw("dayRender",bF,bY,aA(b0))});a1(bg)}function bx(){var bX="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+aW()+bn()+"</table>";return bX}function aW(){var b0=bW+"-widget-header";var bZ="";var bY;var bX;bZ+="<thead><tr>";if(bj){bZ+="<th class='fc-week-number "+b0+"'>"+aN(bJ)+"</th>"}for(bY=0;bY<a2;bY++){bX=aV(0,bY);bZ+="<th class='fc-day-header fc-"+U[bX.getDay()]+" "+b0+"'>"+aN(bE(bX,a3))+"</th>"}bZ+="</tr></thead>";return bZ}function bn(){var bZ=bW+"-widget-content";var b0="";var b1;var bY;var bX;b0+="<tbody>";for(b1=0;b1<bm;b1++){b0+="<tr class='fc-week'>";if(bj){bX=aV(b1,0);b0+="<td class='fc-week-number "+bZ+"'><div>"+aN(bE(bX,bt))+"</div></td>"}for(bY=0;bY<a2;bY++){bX=aV(b1,bY);b0+=a4(bX)}b0+="</tr>"}b0+="</tbody>";return b0}function a4(bZ){var bY=bW+"-widget-content";var b1=bF.start.getMonth();var bX=f(new Date());var b0="";var b2=["fc-day","fc-"+U[bZ.getDay()],bY];if(bZ.getMonth()!=b1){b2.push("fc-other-month")}if(+bZ==+bX){b2.push("fc-today",bW+"-state-highlight")}else{if(bZ<bX){b2.push("fc-past")}else{b2.push("fc-future")}}b0+="<td class='"+b2.join(" ")+"' data-date='"+bE(bZ,"yyyy-MM-dd")+"'><div>";if(bh){b0+="<div class='fc-day-number'>"+bZ.getDate()+"</div>"}b0+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";return b0}function bD(bY){bU=bY;var b1=bU-be.height();var b0;var bZ;var bX;if(bk("weekMode")=="variable"){b0=bZ=Math.floor(b1/(bm==1?2:6))}else{b0=Math.floor(b1/bm);bZ=b1-b0*(bm-1)}bs.each(function(b2,b3){if(b2<bm){bX=aA(b3);bX.find("> div").css("min-height",(b2==bm-1?bZ:b0)-K(bX))}})}function bO(bX){bS=bX;bL.clear();bM.clear();ba=0;if(bj){ba=be.find("th.fc-week-number").outerWidth()}br=Math.floor((bS-ba)/a2);aB(a9.slice(0,-1),br)}function a1(bX){bX.click(bQ).mousedown(bB)}function bQ(bY){if(!bk("selectable")){var bX=p(aA(this).data("date"));bw("dayClick",this,bX,true,bY)}}function bv(b1,b2,bX){if(bX){bI.build()}var bY=by(b1,b2);for(var bZ=0;bZ<bY.length;bZ++){var b0=bY[bZ];a1(bN(b0.row,b0.leftCol,b0.row,b0.rightCol))}}function bN(b0,b1,bY,bZ){var bX=bI.rect(b0,b1,bY,bZ,bf);return bR(bX,bf)}function bu(bX,bY){return S(bX)}function bH(bX,bZ,bY){bv(bX,aK(S(bZ),1),true)}function aU(){a6()}function bd(bZ,b1,b0){var bX=bK(bZ);var bY=bg[bX.row*a2+bX.col];bw("dayClick",bY,bZ,b1,b0)}function aZ(bZ,bX,bY){a0.start(function(b0){a6();if(b0){bN(b0.row,b0.col,b0.row,b0.col)}},bX)}function a8(b1,bY,bZ){var bX=a0.stop();a6();if(bX){var b0=aV(bX);bw("drop",b1,b0,true,bY,bZ)}}function bT(bX){return S(bX.start)}bI=new T(function(bX,b0){var bZ,b1,bY;a9.each(function(b3,b2){bZ=aA(b2);b1=bZ.offset().left;if(b3){bY[1]=b1}bY=[b1];b0[b3]=bY});bY[1]=b1+bZ.outerWidth();a5.each(function(b3,b2){if(b3<bm){bZ=aA(b2);b1=bZ.offset().top;if(b3){bY[1]=b1}bY=[b1];bX[b3]=bY}});bY[1]=b1+bZ.outerHeight()});a0=new aw(bI);bL=new n(function(bX){return bq.eq(bX)});bM=new n(function(bX){return aX.eq(bX)});function bV(bX){return bL.left(bX)}function bi(bX){return bL.right(bX)}function bC(bX){return bM.left(bX)}function bA(bX){return bM.right(bX)}function bc(bX){return a5.eq(bX)}}function at(){var aV=this;aV.renderEvents=aU;aV.clearEvents=aW;ac.call(aV);function aU(aY,aX){aV.renderDayEvents(aY,aX)}function aW(){aV.getDaySegmentContainer().empty()}}ak.agendaWeek=i;function i(aZ,aY){var a2=this;a2.render=aU;L.call(a2,aZ,aY,"agendaWeek");var aV=a2.opt;var aW=a2.renderAgenda;var a1=a2.skipHiddenDays;var aX=a2.getCellsPerWeek;var a0=aY.formatDates;function aU(a7,a9){if(a9){aK(a7,a9*7)}var a8=aK(S(a7),-((a7.getDay()-aV("firstDay")+7)%7));var a5=aK(S(a8),7);var a4=S(a8);a1(a4);var a3=S(a5);a1(a3,-1,true);var a6=aX();a2.title=a0(a4,aK(S(a3),-1),aV("titleFormat"));a2.start=a8;a2.end=a5;a2.visStart=a4;a2.visEnd=a3;aW(a6)}}ak.agendaDay=aE;function aE(aY,a1){var aX=this;aX.render=aZ;L.call(aX,aY,a1,"agendaDay");var aW=aX.opt;var aU=aX.renderAgenda;var aV=aX.skipHiddenDays;var a0=a1.formatDate;function aZ(a3,a5){if(a5){aK(a3,a5)}aV(a3,a5<0?-1:1);var a4=S(a3,true);var a2=aK(S(a4),1);aX.title=a0(a3,aW("titleFormat"));aX.start=aX.visStart=a4;aX.end=aX.visEnd=a2;aU(1)}}ap({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24,slotEventOverlap:true});function L(cj,ba,bn){var bk=this;bk.renderAgenda=a6;bk.setWidth=bw;bk.setHeight=bs;bk.afterRender=b2;bk.defaultEventEnd=b1;bk.timePosition=cm;bk.getIsCellAllDay=bD;bk.allDayRow=bK;bk.getCoordinateGrid=function(){return bP};bk.getHoverListener=function(){return ci};bk.colLeft=cd;bk.colRight=bU;bk.colContentLeft=cn;bk.colContentRight=a2;bk.getDaySegmentContainer=function(){return bf};bk.getSlotSegmentContainer=function(){return a0};bk.getMinMinute=function(){return br};bk.getMaxMinute=function(){return aW};bk.getSlotContainer=function(){return bd};bk.getRowCnt=function(){return 1};bk.getColCnt=function(){return bN};bk.getColWidth=function(){return a3};bk.getSnapHeight=function(){return cf};bk.getSnapMinutes=function(){return bA};bk.defaultSelectionEnd=bv;bk.renderDayOverlay=aY;bk.renderSelection=cb;bk.clearSelection=b6;bk.reportDayClick=bh;bk.dragStart=a4;bk.dragStop=ck;aL.call(bk,cj,ba,bn);c.call(bk);au.call(bk);Z.call(bk);var bI=bk.opt;var bL=bk.trigger;var bz=bk.renderOverlay;var aX=bk.clearOverlays;var bB=bk.reportSelection;var b9=bk.unselect;var bG=bk.daySelectionMousedown;var bc=bk.slotSegHtml;var bi=bk.cellToDate;var a5=bk.dateToCell;var bp=bk.rangeToSegments;var bg=ba.formatDate;var bX;var cg;var b4;var b3;var bm;var aZ;var aU;var b0;var bT;var cl;var bf;var ch;var b8;var bx;var bd;var a0;var a7;var a1;var bE;var bR;var bt;var a3;var bH;var bO;var bA;var bb;var cf;var bN;var bS;var bP;var ci;var bM;var bF;var bo={};var by;var aV;var br,aW;var a9;var bY;var bJ;var bC;aT(cj.addClass("fc-agenda"));function a6(co){bN=co;bQ();if(!bX){bl()}else{bW()}}function bQ(){by=bI("theme")?"ui":"fc";aV=bI("isRTL");br=aO(bI("minTime"));aW=aO(bI("maxTime"));a9=bI("columnFormat");bY=bI("weekNumbers");bJ=bI("weekNumberTitle");if(bI("weekNumberCalculation")!="iso"){bC="w"}else{bC="W"}bA=bI("snapMinutes")||bI("slotMinutes")}function bl(){var ct=by+"-widget-header";var co=by+"-widget-content";var cs;var cv;var cr;var cu;var cq;var cp=bI("slotMinutes")%15==0;bW();cl=aA("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(cj);if(bI("allDaySlot")){bf=aA("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(cl);cs="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+ct+" fc-agenda-axis'>"+bI("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+ct+" fc-agenda-gutter'>&nbsp;</th></tr></table>";ch=aA(cs).appendTo(cl);b8=ch.find("tr");bu(b8.find("td"));cl.append("<div class='fc-agenda-divider "+ct+"'><div class='fc-agenda-divider-inner'/></div>")}else{bf=aA([])}bx=aA("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(cl);bd=aA("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bx);a0=aA("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(bd);cs="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";cv=h();cu=k(S(cv),aW);k(cv,br);bS=0;for(cr=0;cv<cu;cr++){cq=cv.getMinutes();cs+="<tr class='fc-slot"+cr+" "+(!cq?"":"fc-minor")+"'><th class='fc-agenda-axis "+ct+"'>"+((!cp||!cq)?bg(cv,bI("axisFormat")):"&nbsp;")+"</th><td class='"+co+"'><div style='position:relative'>&nbsp;</div></td></tr>";k(cv,bI("slotMinutes"));bS++}cs+="</tbody></table>";a7=aA(cs).appendTo(bd);b7(a7.find("td"))}function bW(){var co=ce();if(bX){bX.remove()}bX=aA(co).appendTo(cj);cg=bX.find("thead");b4=cg.find("th").slice(1,-1);b3=bX.find("tbody");bm=b3.find("td").slice(0,-1);aZ=bm.find("> div");aU=bm.find(".fc-day-content > div");b0=bm.eq(0);bT=aZ.eq(0);g(cg.add(cg.find("tr")));g(b3.add(b3.find("tr")))}function ce(){var co="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+cc()+b5()+"</table>";return co}function cc(){var cr=by+"-widget-header";var cp;var cq="";var cs;var co;cq+="<thead><tr>";if(bY){cp=bi(0,0);cs=bg(cp,bC);if(aV){cs+=bJ}else{cs=bJ+cs}cq+="<th class='fc-agenda-axis fc-week-number "+cr+"'>"+aN(cs)+"</th>"}else{cq+="<th class='fc-agenda-axis "+cr+"'>&nbsp;</th>"}for(co=0;co<bN;co++){cp=bi(0,co);cq+="<th class='fc-"+U[cp.getDay()]+" fc-col"+co+" "+cr+"'>"+aN(bg(cp,a9))+"</th>"}cq+="<th class='fc-agenda-gutter "+cr+"'>&nbsp;</th></tr></thead>";return cq}function b5(){var cq=by+"-widget-header";var cr=by+"-widget-content";var ct;var cv=f(new Date());var cs;var cw;var cp;var co;var cu="";cu+="<tbody><tr><th class='fc-agenda-axis "+cq+"'>&nbsp;</th>";cw="";for(cs=0;cs<bN;cs++){ct=bi(0,cs);co=["fc-col"+cs,"fc-"+U[ct.getDay()],cr];if(+ct==+cv){co.push(by+"-state-highlight","fc-today")}else{if(ct<cv){co.push("fc-past")}else{co.push("fc-future")}}cp="<td class='"+co.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";cw+=cp}cu+=cw;cu+="<td class='fc-agenda-gutter "+cr+"'>&nbsp;</td></tr></tbody>";return cu}function bs(co){if(co===w){co=bR}bR=co;bo={};var cq=b3.position().top;var cp=bx.position().top;var cr=Math.min(co-cq,a7.height()+cp+1);bT.height(cr-K(b0));cl.css("top",cq);bx.height(cr-cp-1);bO=a7.find("tr:first").height()+1;bb=bI("slotMinutes")/bA;cf=bO/bb}function bw(cr){bE=cr;bM.clear();bF.clear();var co=cg.find("th:first");if(ch){co=co.add(ch.find("th:first"))}co=co.add(a7.find("th:first"));bt=0;aB(co.width("").each(function(cs,ct){bt=Math.max(bt,aA(ct).outerWidth())}),bt);var cp=bX.find(".fc-agenda-gutter");if(ch){cp=cp.add(ch.find("th.fc-agenda-gutter"))}var cq=bx[0].clientWidth;bH=bx.width()-cq;if(bH){aB(cp,bH);cp.show().prev().removeClass("fc-last")}else{cp.hide().prev().addClass("fc-last")}a3=Math.floor((cq-bt)/bN);aB(b4.slice(0,-1),a3)}function bq(){var cr=h();var cp=S(cr);cp.setHours(bI("firstHour"));var cq=cm(cr,cp)+1;function co(){bx.scrollTop(cq)}co();setTimeout(co,0)}function b2(){bq()}function bu(co){co.click(bV).mousedown(bG)}function b7(co){co.click(bV).mousedown(a8)}function bV(cs){if(!bI("selectable")){var cq=Math.min(bN-1,Math.floor((cs.pageX-bX.offset().left-bt)/a3));var cp=bi(0,cq);var ct=this.parentNode.className.match(/fc-slot(\d+)/);if(ct){var cr=parseInt(ct[1])*bI("slotMinutes");var co=Math.floor(cr/60);cp.setHours(co);cp.setMinutes(cr%60+br);bL("dayClick",bm[cq],cp,false,cs)}else{bL("dayClick",bm[cq],cp,true,cs)}}}function aY(cs,ct,co){if(co){bP.build()}var cp=bp(cs,ct);for(var cq=0;cq<cp.length;cq++){var cr=cp[cq];bu(be(cr.row,cr.leftCol,cr.row,cr.rightCol))}}function be(cr,cs,cp,cq){var co=bP.rect(cr,cs,cp,cq,cl);return bz(co,cl)}function bj(cs,cx){for(var cq=0;cq<bN;cq++){var ct=bi(0,cq);var cp=aK(S(ct),1);var cr=new Date(Math.max(ct,cs));var cw=new Date(Math.min(cp,cx));if(cr<cw){var cv=bP.rect(0,cq,0,cq,bd);var cu=cm(ct,cr);var co=cm(ct,cw);cv.top=cu;cv.height=co-cu;b7(bz(cv,bd))}}}bP=new T(function(cw,cu){var cs,cp,co;b4.each(function(cz,cy){cs=aA(cy);cp=cs.offset().left;if(cz){co[1]=cp}co=[cp];cu[cz]=co});co[1]=cp+cs.outerWidth();if(bI("allDaySlot")){cs=b8;cp=cs.offset().top;cw[0]=[cp,cp+cs.outerHeight()]}var cv=bd.offset().top;var cx=bx.offset().top;var cr=cx+bx.outerHeight();function ct(cy){return Math.max(cx,Math.min(cr,cy))}for(var cq=0;cq<bS*bb;cq++){cw.push([ct(cv+cf*cq),ct(cv+cf*(cq+1))])}});ci=new aw(bP);bM=new n(function(co){return aZ.eq(co)});bF=new n(function(co){return aU.eq(co)});function cd(co){return bM.left(co)}function cn(co){return bF.left(co)}function bU(co){return bM.right(co)}function a2(co){return bF.right(co)}function bD(co){return bI("allDaySlot")&&!co.row}function bZ(co){var cq=bi(0,co.col);var cp=co.row;if(bI("allDaySlot")){cp--}if(cp>=0){k(cq,br+cp*bA)}return cq}function cm(cp,ct){cp=S(cp,true);if(ct<k(S(cp),br)){return 0}if(ct>=k(S(cp),aW)){return a7.height()}var co=bI("slotMinutes"),cs=ct.getHours()*60+ct.getMinutes()-br,cr=Math.floor(cs/co),cq=bo[cr];if(cq===w){cq=bo[cr]=a7.find("tr").eq(cr).find("td div")[0].offsetTop}return Math.max(0,Math.round(cq-1+bO*((cs%co)/co)))}function bK(co){return b8}function b1(co){var cp=S(co.start);if(co.allDay){return cp}return k(cp,bI("defaultEventMinutes"))}function bv(co,cp){if(cp){return S(co)}return k(S(co),bI("slotMinutes"))}function cb(co,cq,cp){if(cp){if(bI("allDaySlot")){aY(co,aK(S(cq),1),true)}}else{ca(co,cq)}}function ca(co,cu){var cs=bI("selectHelper");bP.build();if(cs){var cq=a5(co).col;if(cq>=0&&cq<bN){var cr=bP.rect(0,cq,0,cq,bd);var ct=cm(co,co);var cp=cm(co,cu);if(cp>ct){cr.top=ct;cr.height=cp-ct;cr.left+=2;cr.width-=5;if(aA.isFunction(cs)){var cv=cs(co,cu);if(cv){cr.position="absolute";a1=aA(cv).css(cr).appendTo(bd)}}else{cr.isStart=true;cr.isEnd=true;a1=aA(bc({title:"",start:co,end:cu,className:["fc-select-helper"],editable:false},cr));a1.css("opacity",bI("dragOpacity"))}if(a1){b7(a1);bd.append(a1);aB(a1,cr.width,true);ae(a1,cr.height,true)}}}}else{bj(co,cu)}}function b6(){aX();if(a1){a1.remove();a1=null}}function a8(co){if(co.which==1&&bI("selectable")){b9(co);var cp;ci.start(function(cr,cq){b6();if(cr&&cr.col==cq.col&&!bD(cr)){var ct=bZ(cq);var cs=bZ(cr);cp=[ct,k(S(ct),bA),cs,k(S(cs),bA)].sort(a);ca(cp[0],cp[3])}else{cp=null}},co);aA(document).one("mouseup",function(cq){ci.stop();if(cp){if(+cp[0]==+cp[1]){bh(cp[0],false,cq)}bB(cp[0],cp[3],false,cq)}})}}function bh(co,cq,cp){bL("dayClick",bm[a5(co).col],co,cq,cp)}function a4(cq,co,cp){ci.start(function(cr){aX();if(cr){if(bD(cr)){be(cr.row,cr.col,cr.row,cr.col)}else{var ct=bZ(cr);var cs=k(S(ct),bI("defaultEventMinutes"));bj(ct,cs)}}},co)}function ck(cr,cp,cq){var co=ci.stop();aX();if(co){bL("drop",cr,bZ(co),bD(co),cp,cq)}}}function Z(){var bu=this;bu.renderEvents=aZ;bu.clearEvents=bf;bu.slotSegHtml=bg;ac.call(bu);var a9=bu.opt;var bh=bu.trigger;var aX=bu.isEventDraggable;var bz=bu.isEventResizable;var be=bu.eventStart;var bA=bu.eventEnd;var bk=bu.eventElementHandlers;var bq=bu.setHeight;var aY=bu.getDaySegmentContainer;var bD=bu.getSlotSegmentContainer;var aW=bu.getHoverListener;var aV=bu.getMaxMinute;var bl=bu.getMinMinute;var a2=bu.timePosition;var bn=bu.getIsCellAllDay;var bp=bu.colContentLeft;var bm=bu.colContentRight;var aU=bu.cellToDate;var br=bu.getColCnt;var ba=bu.getColWidth;var bt=bu.getSnapHeight;var a4=bu.getSnapMinutes;var a6=bu.getSlotContainer;var a7=bu.reportEventElement;var a0=bu.showEvents;var a8=bu.hideEvents;var bx=bu.eventDrop;var bc=bu.eventResize;var bi=bu.renderDayOverlay;var a1=bu.clearOverlays;var bE=bu.renderDayEvents;var bv=bu.calendar;var bs=bv.formatDate;var bb=bv.formatDates;bu.draggableDayEvent=a5;function aZ(bJ,bH){var bI,bG=bJ.length,bK=[],bF=[];for(bI=0;bI<bG;bI++){if(bJ[bI].allDay){bK.push(bJ[bI])}else{bF.push(bJ[bI])}}if(a9("allDaySlot")){bE(bK,bH);bq()}a3(bd(bF),bH)}function bf(){aY().empty();bD().empty()}function bd(bP){var bN=br(),bL=bl(),bG=aV(),bM,bJ=aA.map(bP,bC),bK,bI,bH,bO,bF=[];for(bK=0;bK<bN;bK++){bM=aU(0,bK);k(bM,bL);bO=bo(bP,bJ,bM,k(S(bM),bG-bL));bO=aq(bO);for(bI=0;bI<bO.length;bI++){bH=bO[bI];bH.col=bK;bF.push(bH)}}return bF}function bo(bR,bL,bH,bK){var bI=[],bM,bO=bR.length,bG,bP,bN,bQ,bS,bF,bJ;for(bM=0;bM<bO;bM++){bG=bR[bM];bP=bG.start;bN=bL[bM];if(bN>bH&&bP<bK){if(bP<bH){bQ=S(bH);bF=false}else{bQ=bP;bF=true}if(bN>bK){bS=S(bK);bJ=false}else{bS=bN;bJ=true}bI.push({event:bG,start:bQ,end:bS,isStart:bF,isEnd:bJ})}}return bI.sort(y)}function bB(bF){if(bF.start){return S(bF.start)}else{return k(S(bF.end),a9("defaultEventMinutes"))}}function bC(bF){if(bF.end){return S(bF.end)}else{return k(S(bF.start),a9("defaultEventMinutes"))}}function a3(bQ,bR){var bV,bY=bQ.length,bX,bT,bN,bJ,bK,bM,bH,bS,bF,bZ,bL="",b0,bW,bI,bP,bO,bU=bD(),bG=a9("isRTL");for(bV=0;bV<bY;bV++){bX=bQ[bV];bT=bX.event;bN=a2(bX.start,bX.start);bJ=a2(bX.start,bX.end);bK=bp(bX.col);bM=bm(bX.col);bH=bM-bK;bM-=bH*0.025;bH=bM-bK;bS=bH*(bX.forwardCoord-bX.backwardCoord);if(a9("slotEventOverlap")){bS=Math.max((bS-(20/2))*2,bS)}if(bG){bZ=bM-bX.backwardCoord*bH;bF=bZ-bS}else{bF=bK+bX.backwardCoord*bH;bZ=bF+bS}bF=Math.max(bF,bK);bZ=Math.min(bZ,bM);bS=bZ-bF;bX.top=bN;bX.left=bF;bX.outerWidth=bS;bX.outerHeight=bJ-bN;bL+=bg(bT,bX)}bU[0].innerHTML=bL;b0=bU.children();for(bV=0;bV<bY;bV++){bX=bQ[bV];bT=bX.event;bW=aA(b0[bV]);bI=bh("eventRender",bT,bT,bW);if(bI===false){bW.remove()}else{if(bI&&bI!==true){bW.remove();bW=aA(bI).css({position:"absolute",top:bX.top,left:bX.left}).appendTo(bU)}bX.element=bW;if(bT._id===bR){bw(bT,bW,bX)}else{bW[0]._fci=bV}a7(bT,bW)}}v(bU,bQ,bw);for(bV=0;bV<bY;bV++){bX=bQ[bV];if(bW=bX.element){bX.vsides=K(bW,true);bX.hsides=j(bW,true);bP=bW.find(".fc-event-title");if(bP.length){bX.contentTop=bP[0].offsetTop}}}for(bV=0;bV<bY;bV++){bX=bQ[bV];if(bW=bX.element){bW[0].style.width=Math.max(0,bX.outerWidth-bX.hsides)+"px";bO=Math.max(0,bX.outerHeight-bX.vsides);bW[0].style.height=bO+"px";bT=bX.event;if(bX.contentTop!==w&&bO-bX.contentTop<10){bW.find("div.fc-event-time").text(bs(bT.start,a9("timeFormat"))+" - "+bT.title);bW.find("div.fc-event-title").remove()}bh("eventAfterRender",bT,bT,bW)}}}function bg(bK,bF){var bJ="<";var bH=bK.url;var bG=V(bK,a9);var bI=["fc-event","fc-event-vert"];if(aX(bK)){bI.push("fc-event-draggable")}if(bF.isStart){bI.push("fc-event-start")}if(bF.isEnd){bI.push("fc-event-end")}bI=bI.concat(bK.className);if(bK.source){bI=bI.concat(bK.source.className||[])}if(bH){bJ+="a href='"+aN(bK.url)+"'"}else{bJ+="div"}bJ+=" class='"+bI.join(" ")+"' style='position:absolute;top:"+bF.top+"px;left:"+bF.left+"px;"+bG+"'><div class='fc-event-inner'><div class='fc-event-time'>"+aN(bb(bK.start,bK.end,a9("timeFormat")))+"</div><div class='fc-event-title'>"+aN(bK.title||"")+"</div></div><div class='fc-event-bg'></div>";if(bF.isStart&&bz(bK)){bJ+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"}if(bF.isEnd&&bz(bK)){bJ+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"}bJ+="</"+(bH?"a":"div")+">";return bJ}function bw(bH,bG,bF){var bI=bG.find("div.fc-event-time");if(aX(bH)){bj(bH,bG,bI)}if(bF.isStart&&bz(bH)){by(bH,bG,bI)}if(bF.isEnd&&bz(bH)){by(bH,bG,bI)}bk(bH,bG)}function a5(bG,bP,bK){var bF=bK.isStart;var bQ;var bO;var bS=true;var bJ;var bI=aW();var bL=ba();var bH=bt();var bR=a4();var bN=bl();bP.draggable({opacity:a9("dragOpacity","month"),revertDuration:a9("dragRevertDuration"),start:function(bT,bU){bh("eventDragStart",bP,bG,bT,bU);a8(bG,bP);bQ=bP.width();bI.start(function(bW,bV){a1();if(bW){bO=false;var bY=aU(0,bV.col);var bX=aU(0,bW.col);bJ=aH(bX,bY);if(!bW.row){bi(aK(S(bG.start),bJ),aK(av(bG),bJ));bM()}else{if(bF){if(bS){bP.width(bL-10);ae(bP,bH*Math.round((bG.end?((bG.end-bG.start)/Y):a9("defaultEventMinutes"))/bR));bP.draggable("option","grid",[bL,1]);bS=false}}else{bO=true}}bO=bO||(bS&&!bJ)}else{bM();bO=true}bP.draggable("option","revert",bO)},bT,"drag")},stop:function(bU,bV){bI.stop();a1();bh("eventDragStop",bP,bG,bU,bV);if(bO){bM();bP.css("filter","");a0(bG,bP)}else{var bT=0;if(!bS){bT=Math.round((bP.offset().top-a6().offset().top)/bH)*bR+bN-(bG.start.getHours()*60+bG.start.getMinutes())}bx(this,bG,bJ,bT,bS,bU,bV)}}});function bM(){if(!bS){bP.width(bQ).height("").draggable("option","grid",null);bS=true}}}function bj(bS,bU,bH){var bN=bu.getCoordinateGrid();var bQ=br();var bZ=ba();var bR=bt();var bM=a4();var bY;var bW;var bX,bP;var bF,bI;var bG,bL;var bJ;var bT,bK;bU.draggable({scroll:false,grid:[bZ,bR],axis:bQ==1?"y":false,opacity:a9("dragOpacity"),revertDuration:a9("dragRevertDuration"),start:function(b0,b1){bh("eventDragStart",bU,bS,b0,b1);a8(bS,bU);bN.build();bY=bU.position();bW=bN.cell(b0.pageX,b0.pageY);bX=bP=true;bF=bI=bn(bW);bG=bL=0;bJ=0;bT=bK=0},drag:function(b4,b5){var b0=bN.cell(b4.pageX,b4.pageY);bX=!!b0;if(bX){bF=bn(b0);bG=Math.round((b5.position.left-bY.left)/bZ);if(bG!=bL){var b3=aU(0,bW.col);var b2=bW.col+bG;b2=Math.max(0,b2);b2=Math.min(bQ-1,b2);var b1=aU(0,b2);bJ=aH(b1,b3)}if(!bF){bT=Math.round((b5.position.top-bY.top)/bR)*bM}}if(bX!=bP||bF!=bI||bG!=bL||bT!=bK){bV();bP=bX;bI=bF;bL=bG;bK=bT}bU.draggable("option","revert",!bX)},stop:function(b0,b1){a1();bh("eventDragStop",bU,bS,b0,b1);if(bX&&(bF||bJ||bT)){bx(this,bS,bJ,bF?0:bT,bF,b0,b1)}else{bX=true;bF=false;bG=0;bJ=0;bT=0;bV();bU.css("filter","");bU.css(bY);a0(bS,bU)}}});function bV(){a1();if(bX){if(bF){bH.hide();bU.draggable("option","grid",null);bi(aK(S(bS.start),bJ),aK(av(bS),bJ))}else{bO(bT);bH.css("display","");bU.draggable("option","grid",[bZ,bR])}}}function bO(b1){var b0=k(S(bS.start),b1);var b2;if(bS.end){b2=k(S(bS.end),b1)}bH.text(bb(b0,b2,a9("timeFormat")))}}function by(bJ,bH,bK){var bI,bF;var bL=bt();var bG=a4();bH.resizable({handles:{s:".ui-resizable-handle"},grid:bL,start:function(bM,bN){bI=bF=0;a8(bJ,bH);bh("eventResizeStart",this,bJ,bM,bN)},resize:function(bM,bN){bI=Math.round((Math.max(bL,bH.height())-bN.originalSize.height)/bL);if(bI!=bF){bK.text(bb(bJ.start,(!bI&&!bJ.end)?null:k(bA(bJ),bG*bI),a9("timeFormat")));bF=bI}},stop:function(bM,bN){bh("eventResizeStop",this,bJ,bM,bN);if(bI){bc(this,bJ,0,bG*bI,bM,bN)}else{a0(bJ,bH)}}})}}function aq(aU){var aW=I(aU);var aX=aW[0];var aV;ab(aW);if(aX){for(aV=0;aV<aX.length;aV++){ag(aX[aV])}for(aV=0;aV<aX.length;aV++){Q(aX[aV],0,0)}}return F(aW)}function I(aV){var aY=[];var aX,aU;var aW;for(aX=0;aX<aV.length;aX++){aU=aV[aX];for(aW=0;aW<aY.length;aW++){if(!aS(aU,aY[aW]).length){break}}(aY[aW]||(aY[aW]=[])).push(aU)}return aY}function ab(aY){var aX,aZ;var aW,aU;var aV;for(aX=0;aX<aY.length;aX++){aZ=aY[aX];for(aW=0;aW<aZ.length;aW++){aU=aZ[aW];aU.forwardSegs=[];for(aV=aX+1;aV<aY.length;aV++){aS(aU,aY[aV],aU.forwardSegs)}}}}function ag(aV){var aU=aV.forwardSegs;var aY=0;var aX,aW;if(aV.forwardPressure===w){for(aX=0;aX<aU.length;aX++){aW=aU[aX];ag(aW);aY=Math.max(aY,1+aW.forwardPressure)}aV.forwardPressure=aY}}function Q(aV,aX,aY){var aU=aV.forwardSegs;var aW;if(aV.forwardCoord===w){if(!aU.length){aV.forwardCoord=1}else{aU.sort(aF);Q(aU[0],aX+1,aY);aV.forwardCoord=aU[0].backwardCoord}aV.backwardCoord=aV.forwardCoord-(aV.forwardCoord-aY)/(aX+1);for(aW=0;aW<aU.length;aW++){Q(aU[aW],0,aV.forwardCoord)}}}function F(aX){var aU=[];var aW,aY;var aV;for(aW=0;aW<aX.length;aW++){aY=aX[aW];for(aV=0;aV<aY.length;aV++){aU.push(aY[aV])}}return aU}function aS(aU,aX,aW){aW=aW||[];for(var aV=0;aV<aX.length;aV++){if(e(aU,aX[aV])){aW.push(aX[aV])}}return aW}function e(aV,aU){return aV.end>aU.start&&aV.start<aU.end}function aF(aV,aU){return aU.forwardPressure-aV.forwardPressure||(aV.backwardCoord||0)-(aU.backwardCoord||0)||y(aV,aU)}function y(aV,aU){return aV.start-aU.start||(aU.end-aU.start)-(aV.end-aV.start)||(aV.event.title||"").localeCompare(aU.event.title)}ak.resourceMonth=C;function C(aY,a1){var aX=this;aX.render=aZ;aR.call(aX,aY,a1,"resourceMonth");var aW=aX.opt;var aV=aX.renderBasic;var aU=a1.formatDates;var a0=aX.getResources;function aZ(a4,bb){if(bb===100||bb===-100){var a3=q(a4,(bb>0?1:-1));var a5=q(S(a3),1)}else{if(bb){if(aW("paginateResourceMonth")==="month"){var a3=q(a4,bb*1);a3.setDate(1);var a5=q(S(a3),1)}else{var a3=aK(a4,bb*aW("paginateResourceMonth"));var a5=q(S(a3),1)}}else{var a3=S(a4.setDate(1),true);var a5=q(S(a3.setDate(1),true),1)}}var bc=S(a3);var a8=S(a5);var ba=aW("weekends");if(!ba){aP(bc);aP(a8,-1,true)}aX.title=aU(bc,aK(S(a8),-1),aW("titleFormat"));aX.start=a3;aX.end=a5;aX.visStart=bc;aX.visEnd=a8;var bd=a0.length;var a9=Math.round((a8-bc)/(aD));var a6;if(!ba){var a2=0;for(var a7=1;a7<=a9;a7++){a6=aK(S(bc),a7-1);if(a6.getDay()==0||a6.getDay()==6){a2++}}a9-=a2}aV(bd,a9,false)}}ak.resourceWeek=A;function A(aY,a1){var aX=this;aX.render=aZ;aR.call(aX,aY,a1,"resourceWeek");var aW=aX.opt;var aV=aX.renderBasic;var aU=a1.formatDates;var a0=aX.getResources;function aZ(a6,a8){if(a8===100||a8===-100){var a7=aK(a6,(a8>0?7:-7),false);var a4=aK(S(a7),7)}else{if(a8){var a7=aK(aX.visStart,a8*aW("paginateResourceWeek"),false);var a4=aK(S(a7),7)}else{var a7=aK(S(a6,true),-((a6.getDay()-aW("firstDay")+7)%7));var a4=aK(S(a7),7)}}var a3=S(a7);var a2=S(a4);var a5=aW("weekends");if(!a5){aP(a3);aP(a2,-1,true)}aX.title=aU(a3,aK(S(a2),-1),aW("titleFormat"));aX.start=a7;aX.end=a4;aX.visStart=a3;aX.visEnd=a2;aV(a0.length,a5?7:5,false)}}ak.resourceNextWeeks=ad;function ad(aY,a1){var aX=this;aX.render=aZ;aR.call(aX,aY,a1,"resourceNextWeeks");var aW=aX.opt;var aV=aX.renderBasic;var aU=a1.formatDates;var a0=aX.getResources;function aZ(a3,a9){var a8=aW("weekends");var a4=a8?7:5;var bb=a0.length;var a7=(a8?7:5)*aW("numberOfWeeks");if(a9===100||a9===-100){var a2=aK(a3,aW("numberOfWeeks")*(a9>0?7:-7),false);var a5=aK(S(a2),aW("numberOfWeeks")*7)}else{if(a9){var a2=aK(aX.visStart,a9*aW("paginateResourceNextWeeks"),false);var a5=aK(S(a2),aW("numberOfWeeks")*7)}else{var a2=aK(S(a3),-((a3.getDay()-aW("firstDay")+a4)%a4),false);var a5=aK(S(a2),aW("numberOfWeeks")*7)}}var ba=S(a2);var a6=S(a5);if(!a8){aP(ba);aP(a6,-1,true)}aX.title=aU(ba,aK(S(a6),-1),aW("titleFormat"));aX.start=a2;aX.end=a5;aX.visStart=ba;aX.visEnd=a6;aV(bb,a7,false)}}ak.resourceDay=z;function z(aY,a1){var aX=this;aX.render=aZ;aR.call(aX,aY,a1,"resourceDay");var aW=aX.opt;var aV=aX.renderBasic;var aU=a1.formatDates;var a0=aX.getResources;function aZ(a5,a9){if(a9){aK(a5,a9*1);if(!aW("weekends")){aP(a5,a9<0?-1:1)}}var a8=S(a5,true);var a4=aK(S(a8),1);var a3=a8;var a2=a4;var a6=a0.length;aX.title=aU(a3,a2,aW("titleFormat"));aX.start=a8;aX.end=a4;aX.visStart=a3;aX.visEnd=a2;var a7=Math.round((a2-a3)/1000/60/aW("slotMinutes"));aV(a6,a7,false)}}ak.resourceShortDay=an;function an(aY,a1){var aX=this;aX.render=aZ;aR.call(aX,aY,a1,"resourceShortDay");var aW=aX.opt;var aV=aX.renderBasic;var aU=a1.formatDates;var a0=aX.getResources;function aZ(a5,a9){if(a9){aK(a5,a9*1);if(!aW("weekends")){aP(a5,a9<0?-1:1)}}var a8=k(S(a5,true),aO(aW("minTime")));var a4=k(S(a8),(aO(aW("maxTime"))-aO(aW("minTime"))));var a3=S(a8);var a2=S(a4);var a6=a0.length;aX.title=aU(a3,aK(S(a2),-1),aW("titleFormat"));aX.start=a8;aX.end=a4;aX.visStart=a3;aX.visEnd=a2;var a7=Math.round((a2-a3)/1000/60/aW("slotMinutes"));aV(a6,a7,false)}}ap({weekMode:"fixed",titleFormat:{resourceMonth:"MMMM yyyy",resourceWeek:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",resourceNextWeeks:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",resourceDay:"dddd, MMM d, yyyy",resourceShortDay:"dddd, MMM d, yyyy"},columnFormat:{resourceShortDay:"H:mm",resourceDay:"H:mm",resourceMonth:"M/d",resourceWeek:"ddd M/d",resourceNextWeeks:"ddd M/d"},buttonText:{largePrev:"<span class='fc-text-arrow'>&laquo;</span>",largeNext:"<span class='fc-text-arrow'>&raquo;</span>",resourceShortDay:"resource short day",resourceDay:"resource day",resourceWeek:"resource week",resourceNextWeeks:"resource next weeks",resourceMonth:"resource month"},refetchResources:false,numberOfWeeks:4,paginateResourceWeek:7,paginateResourceNextWeeks:7,paginateResourceMonth:"month"});function aR(b9,a7,bo){var bl=this;bl.renderBasic=bi;bl.setHeight=bu;bl.setWidth=bA;bl.renderDayOverlay=aZ;bl.defaultSelectionEnd=by;bl.renderSelection=b3;bl.clearSelection=b2;bl.reportDayClick=bk;bl.dragStart=a3;bl.dragStop=ca;bl.defaultEventEnd=b0;bl.getHoverListener=function(){return b7};bl.colContentLeft=cc;bl.colContentRight=a0;bl.dateCol=bm;bl.dateCell=b5;bl.dayOfWeekCol=a4;bl.timeOfDayCol=bI;bl.cellDate=aY;bl.cellIsAllDay=function(){return true};bl.allDayRow=b1;bl.allDayBounds=bG;bl.getRowCnt=function(){return bn};bl.getColCnt=function(){return bV};bl.getSnapWidth=function(){return a9};bl.getSnapMinutes=function(){return bH};bl.getResources=a7.fetchResources(!a7.options.refetchResources);bl.getColWidth=function(){return a1};bl.getViewName=function(){return bo};bl.getDaySegmentContainer=function(){return bh};bl.datePositionLeft=bR;bl.isResourceEditable=bs;aL.call(bl,b9,a7,bo);c.call(bl);au.call(bl);N.call(bl);var bP=bl.opt;var bT=bl.trigger;var bO=bl.clearEvents;var bD=bl.renderOverlay;var aX=bl.clearOverlays;var bj=a7.formatDate;var cb=bl.getResources;var bv;var bg;var bN;var bc;var br;var bf;var bQ;var b6;var bh;var bJ;var bY;var a1;var bn,bV,cb;var bW;var b7;var bU;var bK;var aV,bb,ba;var bt;var bM;var bC;var a5;var bH;var a8;var a9;aT(b9.addClass("fc-grid"));function bi(cd,ce,cf){bn=cd;bV=ce;showNumbers=cf;bX();if(!bc){bq()}bE()}function bX(){bC=bP("theme")?"ui":"fc";a5=bP("columnFormat");showWeekNumbers=bP("weekNumbers");weekNumberTitle=bP("weekNumberTitle");if(bP("weekNumberCalculation")!="iso"){weekNumberFormat="w"}else{weekNumberFormat="W"}if(aV){bb=-1;ba=bV-1}else{bb=1;ba=0}bt=bP("firstDay");bM=bP("weekends")?0:1;bH=bP("snapMinutes")||bP("slotMinutes")}function bq(){bh=aA("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b9)}function bE(){var ce=aU();var cd;var cf=bl.getResources;if(bv){bv.remove()}bv=aA(ce).appendTo(b9);bg=bv.find("thead");bN=bg.find("th:not(th.fc-resourceName)");bc=bv.find("tbody");br=bc.find("tr");bf=bc.find("td:not(td.fc-resourceName)");bQ=br.find('td:first-child:not("fc-resourceName")');bc.find("td.fc-resourceName").each(function(cg,ch){bT("resourceRender",cf[cg],ch,bo)});firstRowCellInners=br.eq(0).find(".fc-day > div");firstRowCellContentInners=br.eq(0).find(".fc-day-content > div");bg.add(bg.find("tr")).children().removeClass("fc-first fc-last").filter(':not(".fc-resourceName"):first').addClass("fc-first").end().filter(":last-child").addClass("fc-last");br.children().removeClass("fc-first fc-last").filter(':not(".fc-resourceName"):first').addClass("fc-first").end().filter(":last-child").addClass("fc-last");br.eq(0).addClass("fc-first");br.filter(":last").addClass("fc-last");bf.each(function(cg,ch){cd=bd(cg);bT("dayRender",bl,cd,aA(ch))});bx(bf)}function aU(){var cd="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+a6()+a2()+"</table>";return cd}function a6(){var ch=bC+"-widget-header";var cg="";var cf;var ce;var cd;if(aV){cd=bj(bd(0),weekNumberFormat)+weekNumberTitle}else{cd=weekNumberTitle+bj(bd(0),weekNumberFormat)}cg+="<thead><tr><th class='fc-resourceName'>"+(showWeekNumbers&&(bo==="resourceShortDay"||bo==="resourceDay"||bo==="resourceWeek")?cd:"&nbsp;")+"</th>";for(cf=0;cf<bV;cf++){ce=bd(cf);cg+="<th class='"+ch+" fc-id "+ce.getTime()+(ce.getDay()===0||ce.getDay()===6?"fc-weekend":"")+"'>"+(showWeekNumbers&&(bo==="resourceNextWeeks"||bo==="resourceMonth")&&ce.getDay()===1?"#"+bj(ce,weekNumberFormat)+"<br>":"")+aN(bj(ce,a5))+"</th>"}cg+="</tr></thead>";return cg}function a2(){var cf=bC+"-widget-content";var cg="";var ci;var ce;var cd;var ch=bl.getResources;var cj;cg+="<tbody>";for(ci=0;ci<bn;ci++){cj=ch[ci]["id"];resourceName=ch[ci]["name"];resourceExtra=ch[ci]["extra"];cg+="<tr class='fc-resourcerow-"+cj+"' data-resourceid='"+cj+"'><td class='fc-resourceName'><span>"+resourceName+"</span><br><span class='fc-resoureExtra'>"+resourceExtra+"</span></td>";for(ce=0;ce<bV;ce++){cd=bd(ce);cg+=aW(cd)}cg+="</tr>"}cg+="</tbody>";return cg}function aW(cf){var ce=bC+"-widget-content";var ch=bl.start.getMonth();var cd=f(new Date());var cg="";var ci=["fc-day fc-id"+cf.getTime(),ce];if(cf.getMonth()!=ch){ci.push("fc-other-month")}if(+cf==+cd){ci.push("fc-today",bC+"-state-highlight")}else{if(cf<cd){ci.push("fc-past")}else{ci.push("fc-future")}}if(cf.getDay()==0||cf.getDay()==6){ci.push("fc-weekend-column")}cg+="<td class='"+ci.join(" ")+"' data-date='"+bj(cf,"yyyy-MM-dd")+"'data-timestamp='"+cf.getTime()+"' ><div>";cg+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";return cg}function bu(ce){bY=ce;var ch=bY-bg.height();var cg;var cf;var cd;if(bP("weekMode")=="variable"){cg=cf=Math.floor(ch/(bn==1?2:6))}else{cg=Math.floor(ch/bn);cf=ch-cg*(bn-1)}bQ.each(function(ci,cj){if(ci<bn){cd=aA(cj);cd.find("> div").css("min-height",(ci==bn-1?cf:cg)-K(cd))}})}function bA(cd){bJ=cd;bJ-=aA("td.fc-resourceName").width();bK.clear();a1=Math.floor(bJ/bV);aB(bN,a1);a8=1;if(bo==="resourceShortDay"||bo==="resourceDay"){a8=bP("slotMinutes")/bH}a9=a1/a8}function bx(cd){cd.click(bw).mousedown(bL)}function bw(ce){if(!bP("selectable")){var cd=new Date(Date.parse(aA(this).data("date")));bT("dayClick",this,cd,true,ce)}}function aZ(cl,cq,cj,cn){if(cj){bW.build()}var cf=S(bl.visStart);var cm=aK(S(cf),bV);if(bo=="resourceShortDay"||bo=="resourceDay"){cm=k(S(cf),bP("slotMinutes")*bV)}else{if(!bP("weekends")){cm=S(bl.visEnd)}}var ck=new Date(Math.max(cf,cl));var cp=new Date(Math.min(cm,cq));if(ck<cp){var ci,co;if(bo=="resourceShortDay"||bo=="resourceDay"){ci=(ck-cf)/1000/60/bP("slotMinutes");co=(cp-cf)/1000/60/bP("slotMinutes")}else{if(aV){ci=aH(cp,cf)*bb+ba+1;co=aH(ck,cf)*bb+ba+1}else{ci=aH(ck,cf);co=aH(cp,cf)}if(!bP("weekends")){var cd=0,cg;for(var ch=0;ch<=ci;ch++){cg=aK(S(bl.visStart),ch);if(cg.getDay()==0||cg.getDay()==6){cd++}}ci-=cd;var ce=0;for(ch=0;ch<=co-1;ch++){cg=aK(S(bl.visStart),ch);if(cg.getDay()==0||cg.getDay()==6){ce++}}co-=ce}}bx(be(cn,ci,cn,co-1))}}function be(cg,ch,ce,cf){var cd=bW.rect(cg,Math.round(ch),ce,Math.round(cf),b9);return bD(cd,b9)}function by(cd,ce){return S(cd)}function b3(cd,cg,cf,ce){if(bo=="resourceShortDay"||bo=="resourceDay"){aZ(cd,k(S(cg),bP("slotMinutes")),true,ce)}else{aZ(cd,aK(S(cg),1),true,ce)}}function b2(){aX()}function bk(cf,ci,cg,ch){var ce=bm(cf);var cd=bf[ce];bT("dayClick",cd,cf,ci,cg,ch)}function a3(cf,cd,ce){b7.start(function(cg){aX();if(cg){be(cg.row,cg.col,cg.row,cg.col)}},cd)}function ca(cj,cf,cg){var cd=b7.stop();aX();if(cd){var ch=bl.getResources,ce=ch[cd.row];var ci=aY(cd);bT("drop",cj,ci,true,cf,cg,ce)}}function b0(cd){return S(cd.start)}bW=new T(function(cd,cg){var cf,ch,ce;bN.each(function(cj,ci){cf=aA(ci);ch=cf.offset().left;if(cj){ce[1]=ch}ce=[ch];cg[cj]=ce});ce[1]=ch+cf.outerWidth();br.each(function(cj,ci){if(cj<bn){cf=aA(ci);ch=cf.offset().top;if(cj){ce[1]=ch}ce=[ch];cd[cj]=ce}});ce[1]=ch+cf.outerHeight()});b7=new aw(bW);bU=new n(function(cd){return firstRowCellInners.eq(cd)});bK=new n(function(cd){return firstRowCellContentInners.eq(cd)});function cc(cd){return bK.left(cd)}function a0(cd){return bK.right(cd)}function b5(cf){var ce,cj,ci,ck,cd,ch,cm,cg,cl=bP("weekends");if(bo=="resourceShortDay"||bo=="resourceDay"){ce=bI(cf)}else{ce=Math.round((S(cf,true)-bl.visStart)/1000/60/60/24)}return{col:ce}}function b4(cd){return bU.left(cd)}function bZ(cd){return bU.right(cd)}function bR(ce){var cd=(bo=="resourceShortDay"||bo==="resourceDay")?bB:bS;return cd(ce)}function bB(cg){var ch=bp(S(cg));var cj=bG();var ce=cj.left;var ci=bl.visStart.getTime();var cd=ch.getTime();var cf=(cd-ci)/1000/60/bH;var ck=Math.round(ce+cf*a9);return ck}function bS(cf){var ch=f(S(cf));var cj=bG();var ce=cj.left;var ci=bl.visStart.getTime();var cd=ch.getTime();var cg=(cd-ci)/1000/60/60/24;var ck=Math.round(ce+cg*a9);return ck}function bm(ce){var cd;if(bo==="resourceDay"){cd=bI(ce)}else{cd=Math.round((S(ce,true)-bl.visStart)/1000/60/60/24)}return cd}function aY(cd){return bz(cd.col)}function bz(cd){if(bo=="resourceShortDay"||bo=="resourceDay"){return k(S(bl.visStart),cd*bP("slotMinutes"))}else{if(!bP("weekends")){var cf,ce;for(ce=0;ce<=cd;ce++){cf=aK(S(bl.visStart),ce);if(cf.getDay()==6||cf.getDay()==0){cd++}}}return aK(S(bl.visStart),cd,true)}}function bp(cd){var ce=S(cd);var ch=ce.getHours();var cf=ce.getMinutes();var ci,cj,cl,ck;for(var cg=0;cg<=60/a8;cg++){ci=cg*bH;cj=Math.abs(ci-cf);if(cj<=cl||cg==0){cl=cj;ck=ci}if(ck==60){ch++;ck=0}}cf=ck;ce.setMinutes(cf);ce.setHours(ch);return ce}function b8(cf){var cd=S(cf);var ce=cd.getHours();if(ce>11){aK(cd,1,false)}else{aK(cd,0,false)}return cd}function bd(cd){return bz(cd%bV)}function a4(cd){return((cd-Math.max(bt,bM)+bV)%bV)*bb+ba}function bI(cg){var ch=cg.getHours();var cd=cg.getMinutes();var ce=bP("slotMinutes");var ci,cj,cl,ck;for(var cf=0;cf<=60/ce;cf++){ci=cf*ce;cj=Math.abs(ci-cd);if(cj<=cl||cf==0){cl=cj;ck=ci}if(ck==60){ch++;ck=0}}cd=ck;for(var cf=0;cf<bV;cf++){if(bd(cf).getHours()==ch&&bd(cf).getMinutes()==cd){return cf}}return bV}function b1(cd){return br.eq(cd)}function bG(){return{left:aA(bg).find("th.fc-resourceName").width(),right:aA(bg).width()}}function bF(cd,ch,cg,ce,cf){if(typeof cf=="object"&&cf.readonly===true){return false}selected=true;bT("select",null,cd,ch,cg,ce,"",cf)}function bs(ce){var cd=cb;aA(cd).each(function(cf,cg){if(cg.id==ce&&cg.readonly){return false}});return true}function bL(cl){var ci=bl.cellDate;var cm=bl.cellIsAllDay;var ch=bl.getHoverListener();var cj=bl.unselect;var ck=bl.reportDayClick;var cn;var ce=bl.getResources||[];var cg;if(cl.which==1&&bP("selectable")){cj(cl);var cf=this;var cd;ch.start(function(cp,co){b2();if(cp){cg=typeof ce[cp.row]=="object"?ce[cp.row].readonly:false}if(cp&&cm(cp)&&cg!==true){cd=[ci(co),ci(cp)].sort();b3(cd[0],cd[1],(bo=="resourceShortDay"||bo=="resourceDay"?false:true),cp.row);cn=cp.row}else{cd=null}},cl);aA(document).one("mouseup",function(co){ch.stop();if(cd){if(+cd[0]==+cd[1]){ck(cd[0],(bo=="resourceShortDay"||bo=="resourceDay"?false:true),co,ce[cn])}bF(cd[0],(bo=="resourceShortDay"||bo=="resourceDay"?k(cd[1],bP("slotMinutes")):cd[1]),(bo=="resourceShortDay"||bo=="resourceDay"?false:true),co,ce[cn])}})}}}function N(){var bB=this;bB.renderEvents=a1;bB.clearEvents=bl;bB.bindDaySeg=bh;bB.resizableResourceEventStart=bc;bB.resizableResourceEventEnd=aV;ac.call(bB);var bE=bB.allDayBounds;var bx=bB.colContentLeft;var bu=bB.colContentRight;var a4=bB.allDayRow;var bi=bB.dayOfWeekCol;var a9=bB.opt;var bo=bB.trigger;var aX=bB.isEventDraggable;var bI=bB.isEventResizable;var bN=bB.reportEventClear;var bt=bB.eventElementHandlers;var a2=bB.showEvents;var a8=bB.hideEvents;var aZ=bB.getDaySegmentContainer;var aW=bB.getHoverListener;var bp=bB.renderDayOverlay;var a3=bB.clearOverlays;var bO=bB.getRowCnt;var bz=bB.getColCnt;var aY=bB.getViewName;var bJ=bB.dateCol;var bw=bB.dateCell;var aU=bB.clearSelection;var bk=bB.eventStart;var bK=bB.eventEnd;var bb=bB.eventResize;var bq=bB.normalizeEvent;var bm=bB.timeOfDayCol;var bH=bB.reportEventChange;var a7=bB.reportEventElement;var bF=bB.eventDrop;var bg=bB.getSnapWidth;var a5=bB.getSnapMinutes;var bj=bB.datePositionLeft;var bn=bB.isResourceEditable;function a1(bQ,bP){bA(bd(bQ),bP)}function bA(bR,bQ){var bP=aZ();var bX;var bW=bO();var b2=bz();var bV=0;var b1;var b0;var bY;var bU;var b3=bR.length;var bT;var bZ;var bS;var b4=a5();bP[0].innerHTML=br(bR);bs(bR,bP.children());bD(bR);by(bR,bP,bQ);bM(bR);a0(bR);bC(bR);bX=be();for(b1=0;b1<bW;b1++){b0=0;bY=[];for(bU=0;bU<b2*b4;bU++){bY[bU]=0}while(bV<b3&&(bT=bR[bV]).row==b1){bZ=az(bY.slice(bT.startCol,bT.endCol));bT.top=bZ;bZ+=bT.outerHeight;for(bS=bT.startCol;bS<bT.endCol;bS++){bY[bS]=bZ}bV++}bX[b1].height(az(bY))}bL(bR,a6(bX))}function bG(bS,bR,bW){var bV=aA("<div/>");var bP;var bQ=aZ();var bU;var bX=bS.length;var bT;bV[0].innerHTML=br(bS);bP=bV.children();bQ.append(bP);bs(bS,bP);bM(bS);a0(bS);bC(bS);bL(bS,a6(be()));bP=[];for(bU=0;bU<bX;bU++){bT=bS[bU].element;if(bT){if(bS[bU].row===bR){bT.css("top",bW)}bP.push(bT[0])}}return aA(bP)}function bs(bQ,bV){var bT;var bW=bQ.length;var bP;var bU;var bS;var bR;for(bT=0;bT<bW;bT++){bP=bQ[bT];bU=bP.event;bS=aA(bV[bT]);bR=bo("eventRender",bU,bU,bS);if(bR===false){bS.remove()}else{if(bR&&bR!==true){bR=aA(bR).css({position:"absolute",left:bP.left});bS.replaceWith(bR);bS=bR}bP.element=bS}}}function bD(bQ){var bS;var bT=bQ.length;var bP;var bR;for(bS=0;bS<bT;bS++){bP=bQ[bS];bR=bP.element;if(bR){a7(bP.event,bR)}}}function by(bQ,bV,bR){var bT;var bW=bQ.length;var bP;var bS;var bU;for(bT=0;bT<bW;bT++){bP=bQ[bT];bS=bP.element;if(bS){bU=bP.event;if(bU._id===bR){bh(bU,bS,bP)}else{bS[0]._fci=bT}}}v(bV,bQ,bh)}function bM(bQ){var bU;var bV=bQ.length;var bP;var bT;var bS,bW;var bR={};for(bU=0;bU<bV;bU++){bP=bQ[bU];bT=bP.element;if(bT){bP.hsides=j(bT,true)}}}function a0(bQ){var bS;var bT=bQ.length;var bP;var bR;for(bS=0;bS<bT;bS++){bP=bQ[bS];bR=bP.element;if(bR){bR[0].style.width=Math.max(0,bP.outerWidth-bP.hsides)+"px"}}}function bC(bQ){var bT;var bV=bQ.length;var bP;var bS;var bR,bW;var bU={};for(bT=0;bT<bV;bT++){bP=bQ[bT];bS=bP.element;if(bS){bR=bP.key;bW=bU[bR];if(bW===w){bW=bU[bR]=m(bS)}bP.outerHeight=bS[0].offsetHeight+bW}}}function be(){var bP;var bR=bO();var bQ=[];for(bP=0;bP<bR;bP++){bQ[bP]=a4(bP).find("td:not(.fc-resourceName):first div.fc-day-content > div")}return bQ}function a6(bQ){var bP;var bS=bQ.length;var bR=[];for(bP=0;bP<bS;bP++){bR[bP]=bQ[bP][0].offsetTop}return bR}function bL(bQ,bV){var bS;var bU=bQ.length;var bP;var bR;var bT;for(bS=0;bS<bU;bS++){bP=bQ[bS];bR=bP.element;if(bR){bR[0].style.top=bV[bP.row]+(bP.top||0)+"px";bT=bP.event;bo("eventAfterRender",bT,bT,bR)}}}function bl(){aZ().empty()}function bd(bQ){var bT=bO(),b0=bz(),b8=bB.getResources,ca=S(bB.visStart),b9=S(bB.visEnd),b3,b5,bV,b4,bP,b2,b7,bY,bZ=aY(),b1,bX=[],bU=a9("weekends"),bW,bS,bR,b6;if(bZ=="resourceShortDay"||bZ=="resourceDay"){b3=aA.map(bQ,function(cb){return cb.end||k(S(cb.start),a9("slotMinutes"))})}else{b3=aA.map(bQ,av)}for(b5=0;b5<bT;b5++){bY=b8[b5].id;bV=bv(bQ,b3,ca,b9);for(b4=0;b4<bV.length;b4++){b7=bV[b4];b7.row=b5;if(!aA.isArray(b7.event.resource)){b7.event.resource=[b7.event.resource]}bW=b7.event.start.getDay();bR=b7.event.start.getDate();if(b7.event.end==null){bS=b7.event.start.getDay();b6=S(b7.event.start,true).getDate()}else{bS=b7.event.end.getDay();b6=b7.event.end.getDate()}if(!bU&&(bW==6||bW==0)&&(bS==6||bS==0)&&(bR==b6||aK(S(b7.event.start),1).getDate()==b6)){continue}if(aA.inArray(bY,b7.event.resource)!="-1"){bX.push(b7)}}}return bX}function bv(b1,bV,bR,bU){var bS=[],bW,bY=b1.length,bQ,bZ,bX,b0,b2,bP,bT;for(bW=0;bW<bY;bW++){bQ=b1[bW];bZ=bQ.start;bX=bV[bW];if(bX>bR&&bZ<bU){if(bZ<bR){b0=S(bR);bP=false}else{b0=bZ;bP=true}if(bX>bU){b2=S(bU);bT=false}else{b2=bX;bT=true}bS.push({event:bQ,start:b0,end:b2,isStart:bP,isEnd:bT,msLength:b2-b0})}}return bS.sort(bf)}function bf(bQ,bP){return(bP.msLength-bQ.msLength)*100+(bQ.event.start-bP.event.start)}function br(bZ){var bU=a9("isRTL");var b4;var b8=bZ.length;var b7;var b2;var bS;var b9;var bW=bE();var b0=bW.left;var b5=bW.right;var bY;var b3;var bQ;var ca;var bP;var bX="";var b1=aY();var bV=a9("weekends"),bR,bT,b6;for(b4=0;b4<b8;b4++){b7=bZ[b4];b2=b7.event;b9=["fc-event","fc-event-hori"];if(aX(b2)){b9.push("fc-event-draggable")}if(b7.isStart){b9.push("fc-event-start")}if(b7.isEnd){b9.push("fc-event-end")}bY=bw(b7.start).col;b3=bw(b7.end).col-1;if(b1=="resourceShortDay"||b1=="resourceDay"){if(((b7.end-b7.start)/1000/60)<a9("slotMinutes")){bY--}}else{if(!bV){bY=bw(b7.start).col;b3=bw(aK(S(b7.end),-1)).col;if(b7.start.getDay()==6||b7.start.getDay()==0){bY++}}}if(bU){bQ=b7.isEnd?bx(bY):b0;ca=b7.isStart?bu(b3):b5}else{bQ=b7.isStart?bx(bY):b0;ca=b7.isEnd?bu(b3):b5}b9=b9.concat(b2.className);if(b2.source){b9=b9.concat(b2.source.className||[])}bS=b2.url;bP=V(b2,a9);if(bS){bX+="<a href='"+aN(bS)+"'"}else{bX+="<div"}bX+=" class='"+b9.join(" ")+"' style='position:absolute;z-index:8;left:"+bQ+"px;"+bP+"'><div class='fc-event-inner'"+(bP?" style='"+bP+"'":"")+">";bX+="<span class='fc-event-title' "+(bP?" style='"+bP+"'":"")+">"+aN(b2.title?b2.title+" / "+b2.product:b2.product)+"</span><br>";if(!b2.allDay&&(b7.isStart||b7.iseEnd)){bX+="<span class='fc-event-time'>"+aN(l(b2.start,b2.end,a9("timeFormat")))+"</span>"}bX+="<span class='fc-event-title' "+(bP?" style='"+bP+"'":"")+">"+aN(b2.account)+"</span><br><span class='fc-event-title' "+(bP?" style='"+bP+"'":"")+">"+aN(b2.description)+"</span><br></div>";if(b7.isStart&&bI(b2)){bX+="<div class='ui-resizable-handle ui-resizable-"+(bU?"e":"w")+"'>&nbsp;&nbsp;&nbsp;</div>"}if(b7.isEnd&&bI(b2)){bX+="<div class='ui-resizable-handle ui-resizable-"+(bU?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"}bX+="</"+(bS?"a":"div")+">";b7.left=bQ;b7.outerWidth=ca-bQ;b7.startCol=bY;b7.endCol=b3+1}return bX}function bh(bR,bQ,bP){var bS=bQ.find("div.fc-event-time");if(aX(bR)&&bn(bR.resource)){ba(bR,bQ,bS)}if(bP.isStart&&bI(bR)&&bn(bR.resource)){aV(bR,bQ,bS)}if(bP.isEnd&&bI(bR)&&bn(bR.resource)){bc(bR,bQ,bS)}bt(bR,bQ)}function ba(bP,b0){var bT=aW();var bU,bZ,b3,bR,bQ=bB.getResources,b1=aY(),bV,bY,bX,bS,b2,bW;b0.draggable({zIndex:9,delay:50,opacity:a9("dragOpacity"),revertDuration:a9("dragRevertDuration"),start:function(b4,b5){bo("eventDragStart",b0,bP,b4,b5);a8(bP,b0);bT.start(function(b7,b6,b8,ca){b0.draggable("option","revert",!b7||!b8&&!ca||bQ[b7.row].readonly===true);a3();if(b7&&!bQ[b7.row].readonly){b3=b8;bR=bQ[b7.row].id;if(b1=="resourceShortDay"||b1=="resourceDay"){bZ=ca*(a9("isRTL")?-1:1)*a9("slotMinutes");var b9=bP.end?S(bP.end):k(S(bP.start),(a9("isRTL")?-1:1)*a9("slotMinutes"));bp(k(S(bP.start),bZ),k(b9,bZ),false,b7.row)}else{bU=bS=b2=ca*(a9("isRTL")?-1:1);if(!a9("weekends")&&(bU>0||bU<0)){if(bU>0){for(bW=1;bW<=bS;bW++){bV=aK(S(bP.start),bW);if(bV.getDay()==6||bV.getDay()==0){bS++}}for(bW=1;bW<=b2;bW++){bV=aK(S(bP.end),bW);if(bV.getDay()==6||bV.getDay()==0){b2++}}}else{for(bW=-1;bW>=bS;bW--){bV=aK(S(bP.start),bW);if(bV.getDay()==6||bV.getDay()==0){bS--}}for(bW=-1;bW>=b2;bW--){bV=aK(S(bP.end),bW);if(bV.getDay()==6||bV.getDay()==0){b2--}}}}bp(aK(S(bP.start),bS),aK(av(bP),b2),false,b7.row)}}else{bZ=0;bU=0;b3=0}},b4,"drag")},stop:function(b5,b6){var b4=bT.stop();a3();bo("eventDragStop",b0,bP,b5,b6);if(!b4){bo("eventDropOutside",b0,bP,b5,b6)}if((b1=="resourceShortDay"||b1=="resourceDay")&&(bZ||b3)){bF(this,bP,0,bZ,bP.allDay,b5,b6,bR)}else{if(bU||b3){if(!a9("weekends")){if(bU>0){bY=0;for(bW=1;bW<=bU+bY;bW++){bV=aK(S(bP.start),bW);if(bV.getDay()==6||bV.getDay()==0){bY++}}if(bY>0){bP.start=aK(S(bP.start),bY,true)}bY=0;for(bW=1;bW<=bU+bY;bW++){bV=aK(S(bP.end),bW);if(bV.getDay()==6||bV.getDay()==0){bY++}}if(bY>0){bP.end=aK(S(bP.end),bY,true)}}else{bX=0;for(bW=-1;bW>=bU+bX;bW--){bV=aK(S(bP.start),bW);if(bV.getDay()==6||bV.getDay()==0){bX--}}if(bX<0){bP.start=aK(S(bP.start),bX,true)}bX=0;for(bW=-1;bW>=bU+bX;bW--){bV=aK(S(bP.end),bW);if(bV.getDay()==6||bV.getDay()==0){bX--}}if(bX<0){bP.end=aK(S(bP.end),bX,true)}}}bF(this,bP,bU,0,bP.allDay,b5,b6,bR)}else{b0.css("filter","");a2(bP,b0)}}}})}function bc(bR,bQ,bP){var bU=a9("isRTL");var bT=bU?"s":"w";var bS=bQ.find("div.ui-resizable-"+bT);var bV=false;aT(bQ);bQ.mousedown(function(bW){bW.preventDefault()}).click(function(bW){if(bV){bW.preventDefault();bW.stopImmediatePropagation()}});bS.mousedown(function(cc){if(cc.which!=1){return}bV=true;var b2=bB.getHoverListener();var bZ=bO();var b8=bz();var b6=aY();var b5=bU?-1:1;var b4=bU?b8-1:0;var bW=bQ.css("top");var b0,ca;var cb;var b7;var cd=aA.extend({},bR);var b3=bw(bR.start);var bX;var bY;var b1;aU();aA("body").css("cursor",bT+"-resize").one("mouseup",b9);bo("eventResizeStart",this,bR,cc);b2.start(function(cg,cf){if(cg){var cj=Math.max(b3.row,cg.row);var ck=cg.col;if(b6=="resourceShortDay"||b6=="resourceDay"){if(ck>=bw(bR.end).col){return}cb=(a9("slotMinutes")*ck*b5+b4)-(a9("slotMinutes")*cf.col*b5+b4);b1=bR.start||k(S(bR.end),a9("slotMinutes"));var ce=k(S(b1),cb)}else{if(ck>bw(bR.end).col){return}b0=ca=(7+ck*b5+b4)-(7+cf.col*b5+b4);b1=bR.start||S(bR.end);if(!a9("weekends")&&(b0>0||b0<0)){if(b0>0){for(var ch=1;ch<=ca;ch++){bY=aK(S(b1),ch);if(bY.getDay()==6||bY.getDay()==0){ca++}}}else{for(ch=-1;ch>=ca;ch--){bY=aK(S(b1),ch);if(bY.getDay()==6||bY.getDay()==0){ca--}}}}ce=aK(bk(bR),ca,true)}if(b0||cb){cd.start=ce;var ci=b7;b7=bG(bd([cd]),cf.row,bW);b7.find("*").css("cursor",bT+"-resize");if(ci){ci.remove()}a8(bR)}else{if(b7){a2(bR);b7.remove();b7=null}}a3();if(b6=="resourceShortDay"||b6=="resourceDay"){bp(S(ce),bR.end,1,cf.row)}else{bp(aK(S(ce),1),bR.end,1,cf.row)}}},cc);function b9(cg){bo("eventResizeStop",this,bR,cg);aA("body").css("cursor","");b2.stop();a3();if(b0){if(!a9("weekends")){b1=bR.start||S(bR.end);if(b0>0){var ce=0;for(var cf=1;cf<=b0+ce;cf++){bY=aK(S(b1),cf);if(bY.getDay()==6||bY.getDay()==0){ce++}}if(ce>0){bR.start=aK(S(b1),ce,true)}}else{var ch=0;for(cf=-1;cf>=b0+ch;cf--){bY=aK(S(b1),cf);if(bY.getDay()==6||bY.getDay()==0){ch--}}if(ch<0){bR.start=aK(S(b1),ch,true)}}}bb(this,bR,b0,0,cg,null,true)}else{if(cb){bb(this,bR,0,cb,cg,null,true)}}setTimeout(function(){bV=false},0)}})}function aV(bR,bQ,bP){var bU=a9("isRTL");var bT=bU?"w":"e";var bS=bQ.find("div.ui-resizable-"+bT);var bV=false;aT(bQ);bQ.mousedown(function(bW){bW.preventDefault()}).click(function(bW){if(bV){bW.preventDefault();bW.stopImmediatePropagation()}});bS.mousedown(function(cd){if(cd.which!=1){return}bV=true;var b3=bB.getHoverListener();var bZ=bO();var b9=bz();var b7=aY();var b6=bU?-1:1;var b5=bU?b9-1:0;var bX=bQ.css("top");var b0,cb,b2;var cc;var b8;var cf=aA.extend({},bR);var b4=bw(bR.start);var bW;var bY;var b1;var ce;aU();aA("body").css("cursor",bT+"-resize").one("mouseup",ca);bo("eventResizeStart",this,bR,cd);b3.start(function(ch,cg){if(ch){var cl=Math.max(b4.row,ch.row);var cm=ch.col;if(b7=="resourceShortDay"||b7=="resourceDay"){if(cm<bw(bR.start).col){return}cc=(a9("slotMinutes")*cm*b6+b5)-(a9("slotMinutes")*cg.col*b6+b5);ce=bR.end||k(S(bR.start),a9("slotMinutes"));var ck=k(S(ce),cc)}else{if(cm<bw(bR.start).col){return}b0=cb=b2=(7+cm*b6+b5)-(7+cg.col*b6+b5);ce=bR.end||S(bR.start);if(!a9("weekends")&&(b0>0||b0<0)){if(b0>0){for(var ci=1;ci<=b2;ci++){bY=aK(S(ce),ci);if(bY.getDay()==6||bY.getDay()==0){b2++}}}else{for(ci=-1;ci>=b2;ci--){bY=aK(S(ce),ci);if(bY.getDay()==6||bY.getDay()==0){b2--}}}}ck=aK(bK(bR),b2,true)}if(b0||cc){cf.end=ck;var cj=b8;b8=bG(bd([cf]),cg.row,bX);b8.find("*").css("cursor",bT+"-resize");if(cj){cj.remove()}+a8(bR)}else{if(b8){a2(bR);b8.remove();b8=null}}a3();if(b7=="resourceShortDay"||b7=="resourceDay"){bp(bR.start,S(ck),1,cg.row)}else{bp(bR.start,aK(S(ck),1),1,cg.row)}}},cd);function ca(ci){bo("eventResizeStop",this,bR,ci);aA("body").css("cursor","");b3.stop();a3();if(b0){if(!a9("weekends")){ce=bR.end||S(bR.start);if(b0>0){var cg=0;for(var ch=1;ch<=b0+cg;ch++){bY=aK(S(ce),ch);if(bY.getDay()==6||bY.getDay()==0){cg++}}if(cg>0){bR.end=aK(S(ce),cg,true)}}else{var cj=0;for(ch=-1;ch>=b0+cj;ch--){bY=aK(S(ce),ch);if(bY.getDay()==6||bY.getDay()==0){cj--}}if(cj<0){bR.end=aK(S(ce),cj,true)}}}bb(this,bR,b0,0,ci,null,false)}else{if(cc){bb(this,bR,0,cc,ci,null,false)}}setTimeout(function(){bV=false},0)}})}}function aL(ba,bw,a7){var bv=this;bv.element=ba;bv.calendar=bw;bv.name=a7;bv.opt=bf;bv.trigger=bo;bv.isEventDraggable=aZ;bv.isEventResizable=bB;bv.setEventData=by;bv.clearEventData=aY;bv.eventStart=bl;bv.eventStart=bl;bv.eventEnd=bC;bv.reportEventElement=bd;bv.triggerEventDestroy=bn;bv.eventElementHandlers=bq;bv.showEvents=a2;bv.hideEvents=be;bv.eventDrop=bz;bv.eventResize=bi;bv.getShownEvents=a0;var bu=bv.defaultEventStart;var bE=bv.defaultEventEnd;var bp=bw.normalizeEvent;var bA=bw.reportEventChange;var bc={};var a6={};var bD=[];var bk=bw.options;function a0(){evs=[];for(id in a6){evs.push(bc[id])}return evs}function bf(bJ,bH){var bI=bk[bJ];if(aA.isPlainObject(bI)){return J(bI,bH||a7)}return bI}function bo(bH,bI){return bw.trigger.apply(bw,[bH,bI||bv].concat(Array.prototype.slice.call(arguments,2),[bv]))}function aZ(bH){var bI=bH.source||{};return aQ(bH.startEditable,bI.startEditable,bf("eventStartEditable"),bH.editable,bI.editable,bf("editable"))&&!bf("disableDragging")}function bB(bH){var bI=bH.source||{};return aQ(bH.durationEditable,bI.durationEditable,bf("eventDurationEditable"),bH.editable,bI.editable,bf("editable"))&&!bf("disableResizing")}function by(bJ){bc={};var bI,bH=bJ.length,bK;for(bI=0;bI<bH;bI++){bK=bJ[bI];if(bc[bK._id]){bc[bK._id].push(bK)}else{bc[bK._id]=[bK]}}}function aY(){bc={};a6={};bD=[]}function bl(bH){return bH.start?S(bH.start):bu(bH)}function bC(bH){return bH.end?S(bH.end):bE(bH)}function bd(bI,bH){bD.push({event:bI,element:bH});if(a6[bI._id]){a6[bI._id].push(bH)}else{a6[bI._id]=[bH]}}function bn(){aA.each(bD,function(bH,bI){bv.trigger("eventDestroy",bI.event,bI.event,bI.element)})}function bq(bI,bH){bH.click(function(bJ){if(!bH.hasClass("ui-draggable-dragging")&&!bH.hasClass("ui-resizable-resizing")){return bo("eventClick",this,bI,bJ)}}).hover(function(bJ){bo("eventMouseover",this,bI,bJ)},function(bJ){bo("eventMouseout",this,bI,bJ)})}function a2(bI,bH){bb(bI,bH,"show")}function be(bI,bH){bb(bI,bH,"hide")}function bb(bK,bJ,bM){var bL=a6[bK._id],bI,bH=bL.length;for(bI=0;bI<bH;bI++){if(!bJ||bL[bI][0]!=bJ[0]){bL[bI][bM]()}}}function bz(bL,bI,bK,bM,bR,bO,bN,bJ){var bQ=bI.allDay;var bH=bI._id;var bP=bI.resource||"";bg(bc[bH],bK,bM,bR,bJ);bo("eventDrop",bL,bI,bK,bM,bR,function(){bg(bc[bH],-bK,-bM,bQ,bP);bA(bH)},bO,bN,bJ);bA(bH)}function bi(bN,bL,bI,bH,bK,bM,bO){var bJ=bL._id;a8(bc[bJ],bI,bH,bO);bo("eventResize",bN,bL,bI,bH,function(){a8(bc[bJ],-bI,-bH,bO);bA(bJ)},bK,bM);bA(bJ)}function bg(bL,bJ,bI,bN,bM){bI=bI||0;for(var bO,bH=bL.length,bK=0;bK<bH;bK++){bO=bL[bK];if(bN!==w){bO.allDay=bN}if(bO.start){bO.start=k(aK(bO.start,bJ,true),bI)}if(bO.end){bO.end=k(aK(bO.end,bJ,true),bI)}if(bO.resource!=bM&&bH==1){bO.resource=bM}bp(bO,bk)}}function a8(bL,bJ,bI,bN){bI=bI||0;for(var bM,bH=bL.length,bK=0;bK<bH;bK++){bM=bL[bK];if(bN){bM.start=k(aK(bl(bM),bJ,true),bI)}else{bM.end=k(aK(bC(bM),bJ,true),bI)}bp(bM,bk)}}bv.isHiddenDay=a4;bv.skipHiddenDays=a1;bv.getCellsPerWeek=bs;bv.dateToCell=bx;bv.dateToDayOffset=bj;bv.dayOffsetToCellOffset=aW;bv.cellOffsetToCell=a9;bv.cellToDate=aX;bv.cellToCellOffset=aU;bv.cellOffsetToDayOffset=bm;bv.dayOffsetToDate=bG;bv.rangeToSegments=br;var bh=bf("hiddenDays")||[];var aV=[];var bF;var a3=[];var a5=[];var bt=bf("isRTL");(function(){if(bf("weekends")===false){bh.push(0,6)}for(var bI=0,bH=0;bI<7;bI++){a3[bI]=bH;aV[bI]=aA.inArray(bI,bh)!=-1;if(!aV[bI]){a5[bH]=bI;bH++}}bF=bH;if(!bF){throw"invalid hiddenDays"}})();function a4(bH){if(typeof bH=="object"){bH=bH.getDay()}return aV[bH]}function bs(){return bF}function a1(bI,bJ,bH){bJ=bJ||1;while(aV[(bI.getDay()+(bH?bJ:0)+7)%7]){aK(bI,bJ)}}function aX(){var bJ=aU.apply(null,arguments);var bH=bm(bJ);var bI=bG(bH);return bI}function aU(bM,bK){var bJ=bv.getColCnt();var bI=bt?-1:1;var bH=bt?bJ-1:0;if(typeof bM=="object"){bK=bM.col;bM=bM.row}var bL=bM*bJ+(bK*bI+bH);return bL}function bm(bI){var bH=bv.visStart.getDay();bI+=a3[bH];return Math.floor(bI/bF)*7+a5[(bI%bF+bF)%bF]-bH}function bG(bH){var bI=S(bv.visStart);aK(bI,bH);return bI}function bx(bJ){var bI=bj(bJ);var bK=aW(bI);var bH=a9(bK);return bH}function bj(bH){return aH(bH,bv.visStart)}function aW(bI){var bH=bv.visStart.getDay();bI+=bH;return Math.floor(bI/7)*bF+a3[(bI%7+7)%7]-a3[bH]}function a9(bM){var bK=bv.getColCnt();var bI=bt?-1:1;var bH=bt?bK-1:0;var bL=Math.floor(bM/bK);var bJ=((bM%bK+bK)%bK)*bI+bH;return{row:bL,col:bJ}}function br(bI,bX){var bL=bv.getRowCnt();var bV=bv.getColCnt();var bW=[];var bZ=bj(bI);var bU=bj(bX);var bY=aW(bZ);var bM=aW(bU)-1;for(var bN=0;bN<bL;bN++){var bJ=bN*bV;var bR=bJ+bV-1;var bS=Math.max(bY,bJ);var bK=Math.min(bM,bR);if(bS<=bK){var bH=a9(bS);var bT=a9(bK);var bQ=[bH.col,bT.col].sort();var bO=bm(bS)==bZ;var bP=bm(bK)+1==bU;bW.push({row:bN,leftCol:bQ[0],rightCol:bQ[1],isStart:bO,isEnd:bP})}}return bW}}function ac(){var bC=this;bC.renderDayEvents=bJ;bC.draggableDayEvent=ba;bC.resizableDayEvent=bw;var bf=bC.opt;var bt=bC.trigger;var a2=bC.isEventDraggable;var bF=bC.isEventResizable;var bp=bC.eventStart;var bG=bC.eventEnd;var bd=bC.reportEventElement;var bv=bC.eventElementHandlers;var a5=bC.showEvents;var be=bC.hideEvents;var bE=bC.eventDrop;var bj=bC.eventResize;var bK=bC.getRowCnt;var bB=bC.getColCnt;var bh=bC.getColWidth;var a9=bC.allDayRow;var bI=bC.colLeft;var bb=bC.colRight;var bA=bC.colContentLeft;var by=bC.colContentRight;var bD=bC.dateToCell;var a3=bC.getDaySegmentContainer;var bi=bC.calendar.formatDates;var bu=bC.renderDayOverlay;var a6=bC.clearOverlays;var aW=bC.clearSelection;var a1=bC.getHoverListener;var bx=bC.rangeToSegments;var aZ=bC.cellToDate;var aV=bC.cellToCellOffset;var br=bC.cellOffsetToDayOffset;var bm=bC.dateToDayOffset;var aY=bC.dayOffsetToCellOffset;function bJ(bN,bM){var bL=a8(bN,false,true);aj(bL,function(bP,bO){bd(bP.event,bO)});a7(bL,bM);aj(bL,function(bP,bO){bt("eventAfterRender",bP.event,bP.event,bO)})}function bl(bM,bP,bO){var bL=a8([bM],true,false);var bN=[];aj(bL,function(bR,bQ){if(bR.row===bP){bQ.css("top",bO)}bN.push(bQ[0])});return bN}function a8(bO,bS,bQ){var bP=a3();var bN=bS?aA("<div/>"):bP;var bL=bc(bO);var bM;var bR;bH(bL);bM=bk(bL);bN[0].innerHTML=bM;bR=bN.children();if(bS){bP.append(bR)}a4(bL,bR);aj(bL,function(bU,bT){bU.hsides=j(bT,true)});aj(bL,function(bU,bT){bT.width(Math.max(0,bU.outerWidth-bU.hsides))});aj(bL,function(bU,bT){bU.outerHeight=bT.outerHeight(true)});a0(bL,bQ);return bL}function bc(bN){var bL=[];for(var bM=0;bM<bN.length;bM++){var bO=bs(bN[bM]);bL.push.apply(bL,bO)}return bL}function bs(bO){var bL=bO.start;var bP=av(bO);var bM=bx(bL,bP);console.log(bM);for(var bN=0;bN<bM.length;bN++){bM[bN].event=bO}return bM}function bH(bM){var bP=bf("isRTL");for(var bO=0;bO<bM.length;bO++){var bQ=bM[bO];var bR=(bP?bQ.isEnd:bQ.isStart)?bA:bI;var bL=(bP?bQ.isStart:bQ.isEnd)?by:bb;var bS=bR(bQ.leftCol);var bN=bL(bQ.rightCol);bQ.left=bS;bQ.outerWidth=bN-bS}}function bk(bL){var bN="";for(var bM=0;bM<bL.length;bM++){bN+=bg(bL[bM])}return bN}function bg(bQ){var bO="";var bN=bf("isRTL");var bP=bQ.event;var bM=bP.url;var bR=["fc-event","fc-event-hori"];if(a2(bP)){bR.push("fc-event-draggable")}if(bQ.isStart){bR.push("fc-event-start")}if(bQ.isEnd){bR.push("fc-event-end")}bR=bR.concat(bP.className);if(bP.source){bR=bR.concat(bP.source.className||[])}var bL=V(bP,bf);if(bM){bO+="<a href='"+aN(bM)+"'"}else{bO+="<div"}bO+=" class='"+bR.join(" ")+"' style='position:absolute;left:"+bQ.left+"px;"+bL+"'><div class='fc-event-inner'>";if(!bP.allDay&&bQ.isStart){bO+="<span class='fc-event-time'>"+aN(bi(bP.start,bP.end,bf("timeFormat")))+"</span>"}bO+="<span class='fc-event-title'>"+aN(bP.title||"")+"</span></div>";if(seg.isStart&&bF(bP)){bO+="<div class='ui-resizable-handle ui-resizable-"+(bN?"e":"w")+"'>&nbsp;&nbsp;&nbsp;</div>"}if(seg.isEnd&&bF(bP)){bO+="<div class='ui-resizable-handle ui-resizable-"+(bN?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"}bO+="</"+(bM?"a":"div")+">";return bO}function a4(bM,bR){for(var bO=0;bO<bM.length;bO++){var bQ=bM[bO];var bP=bQ.event;var bN=bR.eq(bO);var bL=bt("eventRender",bP,bP,bN);if(bL===false){bN.remove()}else{if(bL&&bL!==true){bL=aA(bL).css({position:"absolute",left:bQ.left});bN.replaceWith(bL);bN=bL}bQ.element=bN}}}function a0(bN,bP){var bQ=aU(bN);var bL=bz();var bM=[];if(bP){for(var bO=0;bO<bL.length;bO++){bL[bO].height(bQ[bO])}}for(var bO=0;bO<bL.length;bO++){bM.push(bL[bO].position().top)}aj(bN,function(bS,bR){bR.css("top",bM[bS.row]+bS.top)})}function aU(bN){var bP=bK();var bU=bB();var bV=[];var bL=bq(bN);for(var bT=0;bT<bP;bT++){var bS=bL[bT];var bR=[];for(var bQ=0;bQ<bU;bQ++){bR.push(0)}for(var bM=0;bM<bS.length;bM++){var bO=bS[bM];bO.top=az(bR.slice(bO.leftCol,bO.rightCol+1));for(var bQ=bO.leftCol;bQ<=bO.rightCol;bQ++){bR[bQ]=bO.top+bO.outerHeight}}bV.push(az(bR))}return bV}function bq(bM){var bQ=bK();var bP=[];var bL;var bO;var bN;for(bL=0;bL<bM.length;bL++){bO=bM[bL];bN=bO.row;if(bO.element){if(bP[bN]){bP[bN].push(bO)}else{bP[bN]=[bO]}}}for(bN=0;bN<bQ;bN++){bP[bN]=aX(bP[bN]||[])}return bP}function aX(bM){var bO=[];var bL=bo(bM);for(var bN=0;bN<bL.length;bN++){bO.push.apply(bO,bL[bN])}return bO}function bo(bN){bN.sort(aC);var bM=[];for(var bO=0;bO<bN.length;bO++){var bP=bN[bO];for(var bL=0;bL<bM.length;bL++){if(!b(bP,bM[bL])){break}}if(bM[bL]){bM[bL].push(bP)}else{bM[bL]=[bP]}}return bM}function bz(){var bL;var bN=bK();var bM=[];for(bL=0;bL<bN;bL++){bM[bL]=a9(bL).find("div.fc-day-content > div")}return bM}function a7(bM,bL){var bN=a3();aj(bM,function(bR,bP,bO){var bQ=bR.event;if(bQ._id===bL){bn(bQ,bP,bR)}else{bP[0]._fci=bO}});v(bN,bM,bn)}function bn(bN,bL,bM){if(a2(bN)){bC.draggableDayEvent(bN,bL,bM)}if((bM.isStart||bM.isEnd)&&bF(bN)){bC.resizableDayEvent(bN,bL,bM)}bv(bN,bL)}function ba(bO,bN){var bM=a1();var bL;bN.draggable({delay:50,opacity:bf("dragOpacity"),revertDuration:bf("dragRevertDuration"),start:function(bP,bQ){bt("eventDragStart",bN,bO,bP,bQ);be(bO,bN);bM.start(function(bS,bR,bV,bW){bN.draggable("option","revert",!bS||!bV&&!bW);a6();if(bS){var bU=aZ(bR);var bT=aZ(bS);bL=aH(bT,bU);bu(aK(S(bO.start),bL),aK(av(bO),bL))}else{bL=0}},bP,"drag")},stop:function(bP,bQ){bM.stop();a6();bt("eventDragStop",bN,bO,bP,bQ);if(bL){bE(this,bO,bL,0,bO.allDay,bP,bQ)}else{bN.css("filter","");a5(bO,bN)}}})}function bw(bO,bM,bN){var bL=bf("isRTL");var bQ=bL?"w":"e";var bP=bM.find(".ui-resizable-"+bQ);var bR=false;aT(bM);bM.mousedown(function(bS){bS.preventDefault()}).click(function(bS){if(bR){bS.preventDefault();bS.stopImmediatePropagation()}});bP.mousedown(function(b0){if(b0.which!=1){return}bR=true;var bU=a1();var bY=bK();var b1=bB();var bT=bM.css("top");var bW;var bS;var bZ=aA.extend({},bO);var bV=aY(bm(bO.start));aW();aA("body").css("cursor",bQ+"-resize").one("mouseup",bX);bt("eventResizeStart",this,bO,b0);bU.start(function(b3,b2){if(b3){var b6=aV(b2);var b5=aV(b3);b5=Math.max(b5,bV);bW=br(b5)-br(b6);if(bW){bZ.end=aK(bG(bO),bW,true);var b4=bS;bS=bl(bZ,bN.row,bT);bS=aA(bS);bS.find("*").css("cursor",bQ+"-resize");if(b4){b4.remove()}be(bO)}else{if(bS){a5(bO);bS.remove();bS=null}}a6();bu(bO.start,aK(av(bO),bW))}},b0);function bX(b2){bt("eventResizeStop",this,bO,b2);aA("body").css("cursor","");bU.stop();a6();if(bW){bj(this,bO,bW,0,b2)}setTimeout(function(){bR=false},0)}})}}function b(aV,aX){for(var aU=0;aU<aX.length;aU++){var aW=aX[aU];if(aW.leftCol<=aV.rightCol&&aW.rightCol>=aV.leftCol){return true}}return false}function aj(aU,aY){for(var aW=0;aW<aU.length;aW++){var aX=aU[aW];var aV=aX.element;if(aV){aY(aX,aV,aW)}}}function aC(aV,aU){return(aU.rightCol-aU.leftCol)-(aV.rightCol-aV.leftCol)||aU.event.allDay-aV.event.allDay||aV.event.start-aU.event.start||(aV.event.title||"").localeCompare(aU.event.title)}function au(){var a4=this;a4.select=a2;a4.unselect=aY;a4.reportSelection=aU;a4.daySelectionMousedown=a1;var aW=a4.opt;var aX=a4.trigger;var aZ=a4.defaultSelectionEnd;var aV=a4.renderSelection;var a3=a4.clearSelection;var a0=false;if(aW("selectable")&&aW("unselectAuto")){aA(document).mousedown(function(a5){var a6=aW("unselectCancel");if(a6){if(aA(a5.target).parents(a6).length){return}}aY(a5)})}function a2(a5,a7,a6){aY();if(!a7){a7=aZ(a5,a6)}aV(a5,a7,a6);aU(a5,a7,a6)}function aY(a5){if(a0){a0=false;a3();aX("unselect",null,a5)}}function aU(a5,a8,a7,a6){a0=true;aX("select",null,a5,a8,a7,a6)}function a1(a9){var a7=a4.cellToDate;var a6=a4.getIsCellAllDay;var a5=a4.getHoverListener();var ba=a4.reportDayClick;if(a9.which==1&&aW("selectable")){aY(a9);var a8=this;var bb;a5.start(function(bd,bc){a3();if(bd&&a6(bd)){bb=[a7(bc),a7(bd)].sort(a);aV(bb[0],bb[1],true)}else{bb=null}},a9);aA(document).one("mouseup",function(bc){a5.stop();if(bb){if(+bb[0]==+bb[1]){ba(bb[0],true,bc)}aU(bb[0],bb[1],true,bc)}})}}}function c(){var aX=this;aX.renderOverlay=aV;aX.clearOverlays=aU;var aW=[];var aY=[];function aV(a0,aZ){var a1=aY.shift();if(!a1){a1=aA("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")}if(a1[0].parentNode!=aZ[0]){a1.appendTo(aZ)}aW.push(a1.css(a0).show());return a1}function aU(){var aZ;while(aZ=aW.shift()){aY.push(aZ.hide().unbind())}}}function T(aU){var aV=this;var aW;var aX;aV.build=function(){aW=[];aX=[];aU(aW,aX)};aV.cell=function(aY,a4){var a3=aW.length;var aZ=aX.length;var a0,a1=-1,a2=-1;for(a0=0;a0<a3;a0++){if(a4>=aW[a0][0]&&a4<aW[a0][1]){a1=a0;break}}for(a0=0;a0<aZ;a0++){if(aY>=aX[a0][0]&&aY<aX[a0][1]){a2=a0;break}}return(a1>=0&&a2>=0)?{row:a1,col:a2}:null};aV.rect=function(a1,a3,aZ,a0,a2){var aY=a2.offset();return{top:aW[a1][0]-aY.top,left:aX[a3][0]-aY.left,width:aX[a0][1]-aX[a3][0],height:aW[aZ][1]-aW[a1][0]}}}function aw(aZ){var aX=this;var aY;var a0;var aV;var aU;aX.start=function(a1,a2,a3){a0=a1;aV=aU=null;aZ.build();aW(a2);aY=a3||"mousemove";aA(document).bind(aY,aW)};function aW(a1){H(a1);var a2=aZ.cell(a1.pageX,a1.pageY);if(!a2!=!aU||a2&&(a2.row!=aU.row||a2.col!=aU.col)){if(a2){if(!aV){aV=a2}a0(a2,aV,a2.row-aV.row,a2.col-aV.col)}else{a0(a2,aV)}aU=a2}}aX.stop=function(){aA(document).unbind(aY,aW);return aU}}function H(aU){if(aU.pageX===w){aU.pageX=aU.originalEvent.pageX;aU.pageY=aU.originalEvent.pageY}}function n(aV){var aU=this,aW={},aZ={},aY={};function aX(a0){return aW[a0]=aW[a0]||aV(a0)}aU.left=function(a0){return aZ[a0]=aZ[a0]===w?aX(a0).position().left:aZ[a0]};aU.right=function(a0){return aY[a0]=aY[a0]===w?aU.left(a0)+aX(a0).width():aY[a0]};aU.clear=function(){aW={};aZ={};aY={}}}})(jQuery);